<!DOCTYPE html>
<html class="writer-html5" lang="ru,en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3. Preseed Cut Discr &mdash; BilSrvStation_Server_PC 1.0.2a documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="4. important" href="full_discr_pii2.html" />
    <link rel="prev" title="2. ISO InstallDeb Cut Discr" href="cut_discr_pc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> BilSrvStation_Server_PC
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Содержание:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="sourcelink.html">1. Навигация</a></li>
<li class="toctree-l1"><a class="reference internal" href="cut_discr_pc.html">2. ISO InstallDeb Cut Discr</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3. Preseed Cut Discr</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#preseed-file-for-install-debian-server">3.1. Preseed file for install Debian Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#contents-of-the-preconfiguration-file">3.2. Contents of the preconfiguration file</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#localization">3.2.1. Localization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-values-can-also-be-preseeded-individually-for-greater-flexibility">3.2.1.1. The values can also be preseeded individually for greater flexibility</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#keyboard-selection">3.2.2. Keyboard selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="#network-configuration">3.2.3. Network configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#static-network-configuration">3.2.3.1. Static network configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#network-console">3.2.3.2. Network console</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mirror-settings">3.2.3.3. Mirror settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#suite-to-install">3.2.4. Suite to install</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#account-setup">3.2.4.1. Account setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#root-password">3.2.4.2. Root password</a></li>
<li class="toctree-l4"><a class="reference internal" href="#to-create-a-normal-user-account">3.2.4.3. To create a normal user account</a></li>
<li class="toctree-l4"><a class="reference internal" href="#normal-user">3.2.4.4. Normal user</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#clock-and-time-zone-setup">3.2.5. Clock and time zone setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#time-zone">3.2.5.1. Time/zone</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ntp-setup">3.2.5.2. NTP-setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#partitioning">3.2.6. Partitioning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#partman-auto-disk">3.2.6.1. Partman-auto/disk</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lvm-configuration">3.2.6.2. LVM configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#you-can-choose-one-of-the-three-predefined-partitioning-recipes">3.2.6.3. You can choose one of the three predefined partitioning recipes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#or-provide-a-recipe-of-your-own">3.2.6.4. Or provide a recipe of your own</a></li>
<li class="toctree-l4"><a class="reference internal" href="#partitioning-using-raid">3.2.6.5. Partitioning using RAID</a></li>
<li class="toctree-l4"><a class="reference internal" href="#partman-automatically-partition-without-confirmation">3.2.6.6. Partman automatically partition without confirmation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#controlling-how-partitions-are-mounted">3.2.6.7. Controlling how partitions are mounted</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#base-system-installation">3.2.7. Base system installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#uncomment-this-if-you-don">3.2.7.1. Uncomment this if you don</a></li>
<li class="toctree-l4"><a class="reference internal" href="#additional-repositories">3.2.7.2. Additional repositories</a></li>
<li class="toctree-l4"><a class="reference internal" href="#package-selection">3.2.7.3. Package selection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#individual-additional-packages-to-install">3.2.7.4. Individual additional packages to install</a></li>
<li class="toctree-l4"><a class="reference internal" href="#boot-loader-installation">3.2.7.5. Boot loader installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#optional-password-for-grub">3.2.7.6. Optional password for grub</a></li>
<li class="toctree-l4"><a class="reference internal" href="#finishing-up-the-installation">3.2.7.7. Finishing up the installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#avoid-that-last-message-about-the-install-being-complete">3.2.7.8. Avoid that last message about the install being complete</a></li>
<li class="toctree-l4"><a class="reference internal" href="#preseeding-other-packages">3.2.7.9. Preseeding other packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#advanced-options">3.2.7.10. Advanced options</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="full_discr_pii2.html">4. important</a></li>
<li class="toctree-l1"><a class="reference internal" href="full_discr_pii2.html#addr-x">5. [addr]X</a></li>
<li class="toctree-l1"><a class="reference internal" href="full_discr_pii2.html#regexp-x">6. /regexp/X</a></li>
<li class="toctree-l1"><a class="reference internal" href="only_code_pii2.html">7. Appendix Code chunck</a></li>
<li class="toctree-l1"><a class="reference internal" href="cut_discr_pii2.html">8. AutoInstall Cut Discr</a></li>
<li class="toctree-l1"><a class="reference internal" href="cut_discr_pii2_pack.html">9. AutoInstall Package List</a></li>
<li class="toctree-l1"><a class="reference internal" href="cut_discr_cmd_shell.html">10. CMD_SHELL Cut Discr</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure.html">11. Структура</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_doc.html">12. Построение этой документации</a></li>
<li class="toctree-l1"><a class="reference internal" href="note.html">13. Заметки</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BilSrvStation_Server_PC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">3. </span>Preseed Cut Discr</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/cut_discr_preseed.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="preseed-cut-discr">
<h1><span class="section-number">3. </span>Preseed Cut Discr<a class="headerlink" href="#preseed-cut-discr" title="Permalink to this heading"></a></h1>
<div class="line-block">
<div class="line">Published by <a href="#id1"><span class="problematic" id="id2">|author|</span></a></div>
<div class="line">Date: <em>|date|</em> Time <em>|time|</em></div>
</div>
<div class="section" id="preseed-file-for-install-debian-server">
<h2><span class="section-number">3.1. </span>Preseed file for install Debian Server<a class="headerlink" href="#preseed-file-for-install-debian-server" title="Permalink to this heading"></a></h2>
<div class="line-block">
<div class="line">check debconf-set-selections -c preseed.cfg</div>
<div class="line"><br /></div>
<div class="line-block">
<div class="line"><a class="reference external" href="https://wiki.debian.org/DebianInstaller/Preseed">https://wiki.debian.org/DebianInstaller/Preseed</a></div>
<div class="line"><a class="reference external" href="https://www.debian.org/releases/stretch/mips/apbs04.html.ru">https://www.debian.org/releases/stretch/mips/apbs04.html.ru</a></div>
<div class="line"><a class="reference external" href="https://help.ubuntu.com/lts/installation-guide/s390x/apbs04.html">https://help.ubuntu.com/lts/installation-guide/s390x/apbs04.html</a></div>
<div class="line">keys <a class="reference external" href="https://www.x.org/releases/X11R7.5/doc/input/XKB-Config.html">https://www.x.org/releases/X11R7.5/doc/input/XKB-Config.html</a></div>
<div class="line"><a class="reference external" href="https://wiki.archlinux.org/title/Xorg_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)/Keyboard_configuration_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9">https://wiki.archlinux.org/title/Xorg_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)/Keyboard_configuration_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9</a>)</div>
<div class="line"><a class="reference external" href="https://itdraft.ru/2019/12/17/avtomaticheskaya-ustanovka-debian-pri-pomoshhi-preseed/">https://itdraft.ru/2019/12/17/avtomaticheskaya-ustanovka-debian-pri-pomoshhi-preseed/</a></div>
<div class="line"><a class="reference external" href="https://www.debian.org/releases/stretch/example-preseed.txt">https://www.debian.org/releases/stretch/example-preseed.txt</a></div>
</div>
</div>
</div>
<div class="section" id="contents-of-the-preconfiguration-file">
<h2><span class="section-number">3.2. </span>Contents of the preconfiguration file<a class="headerlink" href="#contents-of-the-preconfiguration-file" title="Permalink to this heading"></a></h2>
<div class="section" id="localization">
<h3><span class="section-number">3.2.1. </span>Localization<a class="headerlink" href="#localization" title="Permalink to this heading"></a></h3>
<div class="line-block">
<div class="line-block">
<div class="line">Preseeding only locale sets language, country and locale.</div>
</div>
<div class="line">priority        debconf/priority</div>
<div class="line">fb      debian-installer/framebuffer</div>
<div class="line">language        debian-installer/language</div>
<div class="line">country         debian-installer/country</div>
<div class="line">locale  debian-installer/locale</div>
<div class="line">theme   debian-installer/theme</div>
<div class="line">auto    auto-install/enable</div>
<div class="line">classes         auto-install/classes</div>
<div class="line">файловый        preseed/file</div>
<div class="line">url     preseed/url</div>
<div class="line">domain  netcfg/get_domain</div>
<div class="line">hostname        netcfg/get_hostname</div>
<div class="line">interface       netcfg/choose_interface</div>
<div class="line">protocol        mirror/protocol</div>
<div class="line">suite   mirror/suite</div>
<div class="line">modules         anna/choose_modules</div>
<div class="line">recommends      base-installer/install-recommends</div>
<div class="line">tasks   tasksel:tasksel/first</div>
<div class="line">desktop         tasksel:tasksel/desktop</div>
<div class="line">dmraid  disk-detect/dmraid/enable</div>
<div class="line">keymap  keyboard-configuration/xkb-keymap</div>
<div class="line">preseed-md5     preseed/file/checksum</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="section" id="the-values-can-also-be-preseeded-individually-for-greater-flexibility">
<h4><span class="section-number">3.2.1.1. </span>The values can also be preseeded individually for greater flexibility<a class="headerlink" href="#the-values-can-also-be-preseeded-individually-for-greater-flexibility" title="Permalink to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i debian-installer/language string ru
<span class="linenos">2</span>d-i debian-installer/country string RU
<span class="linenos">3</span>d-i debian-installer/locale string ru_RU.UTF-8
</pre></div>
</div>
<div class="line-block">
<div class="line">Optionally specify additional locales to be generated.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i localechooser/supported-locales multiselect en_US.UTF-8, ru_RU.UTF-8
</pre></div>
</div>
</div>
</div>
<div class="section" id="keyboard-selection">
<h3><span class="section-number">3.2.2. </span>Keyboard selection<a class="headerlink" href="#keyboard-selection" title="Permalink to this heading"></a></h3>
<div class="line-block">
<div class="line"><a class="reference external" href="https://wiki.archlinux.org/title/Xorg/Keyboard_configuration">https://wiki.archlinux.org/title/Xorg/Keyboard_configuration</a></div>
<div class="line">/etc/X11/xorg.conf.d/00-keyboard.conf</div>
<div class="line">/usr/share/X11/xkb/rules/base.lst</div>
<div class="line"><a class="reference external" href="https://unix.stackexchange.com/questions/167131/how-to-use-the-config-option-of-setxkbmap">https://unix.stackexchange.com/questions/167131/how-to-use-the-config-option-of-setxkbmap</a></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i keymap <span class="k">select</span> us
<span class="linenos">2</span>d-i console-keymaps-at/keymap <span class="k">select</span> us
<span class="linenos">3</span>d-i keyboard-configuration/xkb-keymap <span class="k">select</span> us,ru
</pre></div>
</div>
<div class="line-block">
<div class="line">d-i keyboard-configuration/xkb-keymap pc105</div>
<div class="line">d-i keyboard-configuration/xkb-keymap layout us</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i keyboard-configuration/toggle <span class="k">select</span> Alt+Shift
<span class="linenos">2</span>
<span class="linenos">3</span>d-i localechooser/shortlist <span class="k">select</span> RU
<span class="linenos">4</span>d-i console-setup/ask_detect boolean <span class="nb">false</span>
<span class="linenos">5</span>d-i console-setup/layoutcode string ru
<span class="linenos">6</span>d-i     console-setup/variant   <span class="k">select</span>  Россия
<span class="linenos">7</span>d-i     console-setup/toggle    <span class="k">select</span>  Alt+Shift
</pre></div>
</div>
<div class="line-block">
<div class="line">d-i keyboard-configuration/toggle select No toggling</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="network-configuration">
<h3><span class="section-number">3.2.3. </span>Network configuration<a class="headerlink" href="#network-configuration" title="Permalink to this heading"></a></h3>
<div class="line-block">
<div class="line">Disable network configuration entirely. This is useful for cdrom</div>
<div class="line">installations on non-networked devices where the network questions,</div>
<div class="line">warning and long timeouts are a nuisance.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i hw-detect/load_firmware boolean <span class="nb">true</span>
<span class="linenos">2</span>
<span class="linenos">3</span>d-i netcfg/enable boolean <span class="nb">true</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">netcfg will choose an interface that has link if possible. This makes it</div>
<div class="line">skip displaying a list if there is more than one interface.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">To pick a particular interface instead:</div>
</div>
<div class="line">d-i netcfg/choose_interface select eth1</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">To set a different link detection timeout (default is 3 seconds).</div>
<div class="line">Values are interpreted as seconds.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i netcfg/link_wait_timeout string <span class="m">10</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">If you have a slow dhcp server and the installer times out waiting for</div>
<div class="line">it, this might be useful.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i netcfg/dhcp_timeout string <span class="m">60</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">d-i netcfg/dhcpv6_timeout string 60</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i netcfg/choose_interface <span class="k">select</span> auto
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">If you prefer to configure the network manually, uncomment this line and</div>
<div class="line">the static network configuration below.</div>
</div>
<div class="line">d-i netcfg/disable_autoconfig boolean true</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">If you want the preconfiguration file to work on systems both with and</div>
<div class="line">without a dhcp server, uncomment these lines and the static network</div>
<div class="line">configuration below.</div>
</div>
<div class="line">d-i netcfg/dhcp_failed note</div>
<div class="line-block">
<div class="line">Configure network manually</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i netcfg/dhcp_options <span class="k">select</span> auto
</pre></div>
</div>
<div class="section" id="static-network-configuration">
<h4><span class="section-number">3.2.3.1. </span>Static network configuration<a class="headerlink" href="#static-network-configuration" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line"><br /></div>
<div class="line-block">
<div class="line-block">
<div class="line">IPv4 example</div>
</div>
<div class="line">d-i netcfg/get_ipaddress string 192.168.1.42</div>
<div class="line">d-i netcfg/get_netmask string 255.255.255.0</div>
<div class="line">d-i netcfg/get_gateway string 192.168.1.1</div>
<div class="line">d-i netcfg/get_nameservers string 192.168.1.1</div>
<div class="line">d-i netcfg/confirm_static boolean true</div>
<div class="line"><br /></div>
<div class="line-block">
<div class="line">IPv6 example</div>
</div>
<div class="line">d-i netcfg/get_ipaddress string fc00::2</div>
<div class="line">d-i netcfg/get_netmask string ffff:ffff:ffff:ffff::</div>
<div class="line">d-i netcfg/get_gateway string fc00::1</div>
<div class="line">d-i netcfg/get_nameservers string fc00::1</div>
<div class="line">d-i netcfg/confirm_static boolean true</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">Any hostname and domain names assigned from dhcp take precedence over</div>
<div class="line">values set here. However, setting the values still prevents the questions</div>
<div class="line">from being shown, even if values come from dhcp.</div>
</div>
<div class="line">d-i netcfg/get_hostname string unassigned-hostname</div>
<div class="line">d-i netcfg/get_domain string unassigned-domain</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">If you want to force a hostname, regardless of what either the DHCP</div>
<div class="line">server returns or what the reverse DNS entry for the IP is, uncomment</div>
<div class="line">and adjust the following line.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i netcfg/hostname string BilSrvStation
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">Disable that annoying WEP key dialog.</div>
</div>
<div class="line">d-i netcfg/wireless_wep string</div>
<div class="line-block">
<div class="line">The wacky dhcp hostname that some ISPs use as a password of sorts.</div>
</div>
<div class="line">d-i netcfg/dhcp_hostname string BilSrvStation</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">If non-free firmware is needed for the network or other hardware, you can</div>
<div class="line">configure the installer to always try to load it, without prompting. Or</div>
<div class="line">change to false to disable asking.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i hw-detect/load_firmware boolean <span class="nb">true</span>
<span class="linenos">2</span>
<span class="linenos">3</span>d-i netcfg/get_domain string BilSrvWork
<span class="linenos">4</span>d-i netcfg/confirm_static boolean <span class="nb">false</span>
<span class="linenos">5</span>d-i netcfg/disable_dhcp boolean <span class="nb">false</span>
</pre></div>
</div>
</div>
<div class="section" id="network-console">
<h4><span class="section-number">3.2.3.2. </span>Network console<a class="headerlink" href="#network-console" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line-block">
<div class="line">Use the following settings if you wish to make use of the network-console</div>
<div class="line">component for remote installation over SSH. This only makes sense if you</div>
<div class="line">intend to perform the remainder of the installation manually.</div>
</div>
<div class="line">d-i anna/choose_modules string network-console</div>
<div class="line">d-i network-console/authorized_keys_url string <a class="reference external" href="http://10.0.0.1/openssh-key">http://10.0.0.1/openssh-key</a></div>
<div class="line">d-i network-console/password password r00tme</div>
<div class="line">d-i network-console/password-again password r00tme</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="mirror-settings">
<h4><span class="section-number">3.2.3.3. </span>Mirror settings<a class="headerlink" href="#mirror-settings" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line-block">
<div class="line">If you select ftp, the mirror/country string does not need to be set.</div>
</div>
<div class="line">d-i mirror/protocol string ftp</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i mirror/country string manual
<span class="linenos">2</span>d-i mirror/http/hostname string http.us.debian.org
<span class="linenos">3</span>d-i mirror/http/directory string /debian
<span class="linenos">4</span>d-i mirror/http/proxy string
</pre></div>
</div>
</div>
</div>
<div class="section" id="suite-to-install">
<h3><span class="section-number">3.2.4. </span>Suite to install<a class="headerlink" href="#suite-to-install" title="Permalink to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i mirror/suite string main
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">Suite to use for loading installer components (optional).</div>
</div>
<div class="line">d-i mirror/udeb/suite string testing</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="section" id="account-setup">
<h4><span class="section-number">3.2.4.1. </span>Account setup<a class="headerlink" href="#account-setup" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line">Skip creation of a root account (normal user account will be able to</div>
<div class="line">use sudo).</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i passwd/root-login boolean <span class="nb">true</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Alternatively, to skip creation of a normal user account.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i passwd/make-user boolean <span class="nb">false</span>
</pre></div>
</div>
</div>
<div class="section" id="root-password">
<h4><span class="section-number">3.2.4.2. </span>Root password<a class="headerlink" href="#root-password" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line">d-i passwd/root-password password r</div>
<div class="line">d-i passwd/root-password-again password r</div>
<div class="line-block">
<div class="line">or encrypted using a crypt(3)  hash.</div>
<div class="line">$ echo &quot;r00tme&quot; | mkpasswd -s -H MD5</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i passwd/root-password-crypted password <span class="nv">$1$7</span>xORR8sC<span class="nv">$l1HxV</span>/t6fFCHlYzoobBl./
</pre></div>
</div>
</div>
<div class="section" id="to-create-a-normal-user-account">
<h4><span class="section-number">3.2.4.3. </span>To create a normal user account<a class="headerlink" href="#to-create-a-normal-user-account" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line">d-i passwd/user-fullname string Debian User</div>
<div class="line">d-i passwd/username string debian</div>
</div>
</div>
<div class="section" id="normal-user">
<h4><span class="section-number">3.2.4.4. </span>Normal user<a class="headerlink" href="#normal-user" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line">d-i passwd/user-password password insecure</div>
<div class="line">d-i passwd/user-password-again password insecure</div>
<div class="line-block">
<div class="line">or encrypted using a crypt(3) hash.</div>
</div>
<div class="line">d-i passwd/user-password-crypted password [crypt(3) hash]</div>
<div class="line-block">
<div class="line">Create the first user with the specified UID instead of the default.</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i passwd/user-uid string <span class="m">1010</span>
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">The user account will be added to some standard initial groups. To</div>
<div class="line">override that, use this.</div>
</div>
<div class="line">d-i passwd/user-default-groups string audio cdrom video</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="clock-and-time-zone-setup">
<h3><span class="section-number">3.2.5. </span>Clock and time zone setup<a class="headerlink" href="#clock-and-time-zone-setup" title="Permalink to this heading"></a></h3>
<div class="line-block">
<div class="line">Controls whether or not the hardware clock is set to UTC.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i clock-setup/utc boolean <span class="nb">true</span>
</pre></div>
</div>
<div class="section" id="time-zone">
<h4><span class="section-number">3.2.5.1. </span>Time/zone<a class="headerlink" href="#time-zone" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line">You may set this to any valid setting for $TZ; see the contents of</div>
<div class="line">/usr/share/zoneinfo/ for valid values.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i time/zone string Europe/Saratov
</pre></div>
</div>
</div>
<div class="section" id="ntp-setup">
<h4><span class="section-number">3.2.5.2. </span>NTP-setup<a class="headerlink" href="#ntp-setup" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line">Controls whether to use NTP to set the clock during the install</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i clock-setup/ntp boolean <span class="nb">true</span>
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">NTP server to use. The default is almost always fine here.</div>
</div>
<div class="line">d-i clock-setup/ntp-server string ntp.example.com</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="partitioning">
<h3><span class="section-number">3.2.6. </span>Partitioning<a class="headerlink" href="#partitioning" title="Permalink to this heading"></a></h3>
<div class="line-block">
<div class="line">|        Partitioning example</div>
<div class="line-block">
<div class="line">If the system has free space you can choose to only partition that space.</div>
<div class="line">This is only honoured if partman-auto/method (below) is not set.</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i partman-auto/init_automatically_partition <span class="k">select</span> biggest_free
</pre></div>
</div>
<div class="section" id="partman-auto-disk">
<h4><span class="section-number">3.2.6.1. </span>Partman-auto/disk<a class="headerlink" href="#partman-auto-disk" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line">Alternatively, you may specify a disk to partition. If the system has only</div>
<div class="line">one disk the installer will default to using that, but otherwise the device</div>
<div class="line">name must be given in traditional, non-devfs format (so e.g. /dev/sda</div>
<div class="line">and not e.g. /dev/discs/disc0/disc).</div>
<div class="line">For example, to use the first SCSI/SATA hard disk:</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i partman-auto/disk string /dev/nvme0n1 /dev/sda
</pre></div>
</div>
<div class="line-block">
<div class="line">In addition, you'll need to specify the method to use.</div>
<div class="line">The presently available methods are:</div>
<div class="line">- regular: use the usual partition types for your architecture</div>
<div class="line">- lvm:     use LVM to partition the disk</div>
<div class="line">- crypto:  use LVM within an encrypted partition</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i partman-auto/method string regular
</pre></div>
</div>
</div>
<div class="section" id="lvm-configuration">
<h4><span class="section-number">3.2.6.2. </span>LVM configuration<a class="headerlink" href="#lvm-configuration" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line">If one of the disks that are going to be automatically partitioned</div>
<div class="line">contains an old LVM configuration, the user will normally receive a</div>
<div class="line">warning. This can be preseeded away...</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i partman-lvm/device_remove_lvm boolean <span class="nb">true</span>
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">The same applies to pre-existing software RAID array:</div>
</div>
<div class="line">d-i partman-md/device_remove_md boolean true</div>
<div class="line-block">
<div class="line">And the same goes for the confirmation to write the lvm partitions.</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i partman-lvm/confirm boolean <span class="nb">true</span>
<span class="linenos">2</span>d-i partman-lvm/confirm_nooverwrite boolean <span class="nb">true</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">for gpt</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i partman-basicfilesystems/choose_label string gpt
<span class="linenos">2</span>d-i partman-basicfilesystems/default_label string gpt
<span class="linenos">3</span>d-i partman-partitioning/choose_label string gpt
<span class="linenos">4</span>d-i partman-partitioning/default_label string gpt
<span class="linenos">5</span>d-i partman/choose_label string gpt
<span class="linenos">6</span>d-i partman/default_label string gpt
</pre></div>
</div>
</div>
<div class="section" id="you-can-choose-one-of-the-three-predefined-partitioning-recipes">
<h4><span class="section-number">3.2.6.3. </span>You can choose one of the three predefined partitioning recipes<a class="headerlink" href="#you-can-choose-one-of-the-three-predefined-partitioning-recipes" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line">- atomic: all files in one partition</div>
<div class="line">- home:   separate /home partition</div>
<div class="line">- multi:  separate /home, /var, and /tmp partitions</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i partman-auto/choose_recipe <span class="k">select</span> atomic
</pre></div>
</div>
</div>
<div class="section" id="or-provide-a-recipe-of-your-own">
<h4><span class="section-number">3.2.6.4. </span>Or provide a recipe of your own<a class="headerlink" href="#or-provide-a-recipe-of-your-own" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line-block">
<div class="line">If you have a way to get a recipe file into the d-i environment, you can</div>
<div class="line">just point at it.</div>
</div>
<div class="line">d-i partman-auto/expert_recipe_file string /hd-media/recipe</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="partitioning-using-raid">
<h4><span class="section-number">3.2.6.5. </span>Partitioning using RAID<a class="headerlink" href="#partitioning-using-raid" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line-block">
<div class="line">The method should be set to &quot;raid&quot;.</div>
</div>
<div class="line">d-i partman-auto/method string raid</div>
<div class="line-block">
<div class="line">Specify the disks to be partitioned. They will all get the same layout,</div>
<div class="line">so this will only work if the disks are the same size.</div>
</div>
<div class="line">partman-auto partman-auto/init_automatically_partition select Guided - use entire disk</div>
<div class="line">partman-auto partman-auto/automatically_partition select</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">Next you need to specify the physical partitions that will be used.</div>
</div>
<div class="line">d-i partman-auto/expert_recipe string </div>
<div class="line-block">
<div class="line">multiraid ::                                         </div>
<div class="line-block">
<div class="line">1000 5000 4000 raid                          </div>
<div class="line-block">
<div class="line">$primary{ } method{ raid }           </div>
</div>
<div class="line">.                                            </div>
<div class="line">64 512 300% raid                             </div>
<div class="line-block">
<div class="line">method{ raid }                       </div>
</div>
<div class="line">.                                            </div>
<div class="line">500 10000 1000000000 raid                    </div>
<div class="line-block">
<div class="line">method{ raid }                       </div>
</div>
<div class="line">.</div>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Last you need to specify how the previously defined partitions will be</div>
<div class="line">used in the RAID setup. Remember to use the correct partition numbers</div>
<div class="line">for logical partitions. RAID levels 0, 1, 5, 6 and 10 are supported;</div>
<div class="line">devices are separated using &quot;| &quot;.</div>
<div class="line">Parameters are:</div>
<div class="line">&lt;raidtype&gt; &lt;devcount&gt; &lt;sparecount&gt; &lt;fstype&gt; &lt;mountpoint&gt; </div>
<div class="line-block">
<div class="line">&lt;devices&gt; &lt;sparedevices&gt;</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line"><a class="reference external" href="https://www.debian.org/releases/stable/amd64/apbs04.en.html">https://www.debian.org/releases/stable/amd64/apbs04.en.html</a></div>
<div class="line"><a class="reference external" href="http://vladimir-stupin.blogspot.com/2017/10/using-expertrecipe-debianubuntu.html">http://vladimir-stupin.blogspot.com/2017/10/using-expertrecipe-debianubuntu.html</a></div>
<div class="line"><a class="reference external" href="https://wikitech.wikimedia.org/wiki/PartMan">https://wikitech.wikimedia.org/wiki/PartMan</a></div>
<div class="line"><a class="reference external" href="https://www.bishnet.net/tim/blog/2015/01/29/understanding-partman-autoexpert_recipe/">https://www.bishnet.net/tim/blog/2015/01/29/understanding-partman-autoexpert_recipe/</a></div>
<div class="line"><a class="reference external" href="https://www.debian.org/releases/stretch/mips/apbs04.html.ru">https://www.debian.org/releases/stretch/mips/apbs04.html.ru</a></div>
<div class="line">&lt;raidtype&gt; &lt;devcount&gt; &lt;sparecount&gt; &lt;fstype&gt; &lt;mountpoint&gt; </div>
<div class="line-block">
<div class="line">&lt;devices&gt; &lt;sparedevices&gt;</div>
</div>
</div>
<div class="line">d-i partman-auto-raid/recipe string </div>
<div class="line-block">
<div class="line">1 2 0 ext3 /                    </div>
<div class="line-block">
<div class="line">/dev/sda1|    /dev/sdb1       </div>
</div>
<div class="line">.                               </div>
<div class="line">1 2 0 swap -                    </div>
<div class="line-block">
<div class="line">/dev/sda5|    /dev/sdb5       </div>
</div>
<div class="line">.                               </div>
<div class="line">0 2 0 ext3 /home                </div>
<div class="line-block">
<div class="line">/dev/sda6|    /dev/sdb6       </div>
</div>
<div class="line">.</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>d-i partman-auto/expert_recipe string <span class="se">\</span>
<span class="linenos"> 2</span>boot-root ::<span class="se">\</span>
<span class="linenos"> 3</span><span class="m">142</span> <span class="m">100</span> <span class="m">152</span> fat32 <span class="se">\</span>
<span class="linenos"> 4</span>                         <span class="nv">$primary</span><span class="o">{</span> <span class="o">}</span> <span class="nv">$bootable</span><span class="o">{</span> <span class="o">}</span> <span class="se">\</span>
<span class="linenos"> 5</span> method<span class="o">{</span> efi <span class="o">}</span> format<span class="o">{</span> <span class="o">}</span> <span class="se">\</span>
<span class="linenos"> 6</span> mountpoint<span class="o">{</span> /boot/efi <span class="o">}</span> <span class="se">\</span>
<span class="linenos"> 7</span> device<span class="o">{</span>/dev/nvme0n1<span class="o">}</span><span class="se">\</span>
<span class="linenos"> 8</span>                        . <span class="se">\</span>
<span class="linenos"> 9</span><span class="m">8000</span> <span class="m">8100</span> <span class="m">8192</span> linux-swap <span class="se">\</span>
<span class="linenos">10</span> method<span class="o">{</span> swap <span class="o">}</span> format<span class="o">{</span> <span class="o">}</span> <span class="se">\</span>
<span class="linenos">11</span> device<span class="o">{</span>/dev/nvme0n1<span class="o">}</span><span class="se">\</span>
<span class="linenos">12</span>                        . <span class="se">\</span>
<span class="linenos">13</span>                        <span class="m">1</span> <span class="m">1000</span> -1 ext4 <span class="se">\</span>
<span class="linenos">14</span> method<span class="o">{</span> format <span class="o">}</span> format<span class="o">{</span> <span class="o">}</span> <span class="se">\</span>
<span class="linenos">15</span> use_filesystem<span class="o">{</span> <span class="o">}</span> filesystem<span class="o">{</span> ext4 <span class="o">}</span> <span class="se">\</span>
<span class="linenos">16</span> mountpoint<span class="o">{</span> / <span class="o">}</span> <span class="se">\</span>
<span class="linenos">17</span> device<span class="o">{</span>/dev/nvme0n1<span class="o">}</span><span class="se">\</span>
<span class="linenos">18</span>                        .
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">If not, you can put an entire recipe into the preconfiguration file in one</div>
<div class="line">(logical) line. This example creates a small /boot partition, suitable</div>
<div class="line">swap, and uses the rest of the space for the root partition:</div>
</div>
<div class="line">d-i partman-auto/expert_recipe string                         </div>
<div class="line-block">
<div class="line">boot-root ::                                            </div>
<div class="line-block">
<div class="line">40 50 100 ext3                                  </div>
<div class="line-block">
<div class="line">$primary{ } $bootable{ }                </div>
<div class="line">method{ format } format{ }              </div>
<div class="line">use_filesystem{ } filesystem{ ext3 }    </div>
<div class="line">mountpoint{ /boot }                     </div>
</div>
<div class="line">.                                               </div>
<div class="line">500 10000 1000000000 ext3                       </div>
<div class="line-block">
<div class="line">method{ format } format{ }              </div>
<div class="line">use_filesystem{ } filesystem{ ext3 }    </div>
<div class="line">mountpoint{ / }                         </div>
</div>
<div class="line">.                                               </div>
<div class="line">64 512 300% linux-swap                          </div>
<div class="line-block">
<div class="line">method{ swap } format{ }                </div>
</div>
<div class="line">.</div>
</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">The full recipe format is documented in the file partman-auto-recipe.txt</div>
<div class="line">included in the 'debian-installer' package or available from D-I source</div>
<div class="line">repository. This also documents how to specify settings such as file</div>
<div class="line">system labels, volume group names and which physical devices to include</div>
<div class="line">in a volume group.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="partman-automatically-partition-without-confirmation">
<h4><span class="section-number">3.2.6.6. </span>Partman automatically partition without confirmation<a class="headerlink" href="#partman-automatically-partition-without-confirmation" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line">This makes partman automatically partition without confirmation, provided</div>
<div class="line">that you told it what to do using one of the methods above.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i partman-partitioning/confirm_write_new_label boolean <span class="nb">true</span>
<span class="linenos">2</span>d-i partman/choose_partition <span class="k">select</span> finish
<span class="linenos">3</span>d-i partman/confirm boolean <span class="nb">true</span>
<span class="linenos">4</span>d-i partman/confirm_nooverwrite boolean <span class="nb">true</span>
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">When disk encryption is enabled, skip wiping the partitions beforehand.</div>
</div>
<div class="line">d-i partman-auto-crypto/erase_disks boolean false</div>
<div class="line-block">
<div class="line">For additional information see the file partman-auto-raid-recipe.txt</div>
<div class="line">included in the 'debian-installer' package or available from D-I source</div>
<div class="line">repository.</div>
<div class="line">This makes partman automatically partition without confirmation.</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="controlling-how-partitions-are-mounted">
<h4><span class="section-number">3.2.6.7. </span>Controlling how partitions are mounted<a class="headerlink" href="#controlling-how-partitions-are-mounted" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line-block">
<div class="line">The default is to mount by UUID, but you can also choose &quot;traditional&quot; to</div>
<div class="line">use traditional device names, or &quot;label&quot; to try filesystem labels before</div>
<div class="line">falling back to UUIDs.</div>
</div>
<div class="line">d-i partman/mount_style select uuid</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="base-system-installation">
<h3><span class="section-number">3.2.7. </span>Base system installation<a class="headerlink" href="#base-system-installation" title="Permalink to this heading"></a></h3>
<div class="line-block">
<div class="line">Configure APT to not install recommended packages by default. Use of this</div>
<div class="line">option can result in an incomplete system and should only be used by very</div>
<div class="line">experienced users.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i base-installer/install-recommends boolean <span class="nb">false</span>
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">The kernel image (meta) package to be installed; &quot;none&quot; can be used if no</div>
<div class="line">kernel is to be installed.</div>
</div>
<div class="line">d-i base-installer/kernel/image string linux-image-686</div>
</div>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">linenos</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>d-i apt-setup/non-free boolean true
d-i apt-setup/contrib boolean true</p>
</div></blockquote>
<div class="section" id="uncomment-this-if-you-don">
<h4><span class="section-number">3.2.7.1. </span>Uncomment this if you don<a class="headerlink" href="#uncomment-this-if-you-don" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line">d-i apt-setup/use_mirror boolean false</div>
<div class="line-block">
<div class="line">Select which update services to use; define the mirrors to be used.</div>
<div class="line">Values shown below are the normal defaults.</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i apt-setup/services-select multiselect security, updates
<span class="linenos">2</span>d-i apt-setup/security_host string security.debian.org
</pre></div>
</div>
<div class="line-block">
<div class="line">Некоторые версии программы установки могут отсылать отчёт</div>
<div class="line">об установленных и используемых пакетах. По умолчанию данная</div>
<div class="line">возможность выключена, но отправка отчёта помогает проекту</div>
<div class="line">определить популярность программ и какие из них включать на CD.</div>
<div class="line">не отправляем данные об установленных пакетах.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>popularity-contest popularity-contest/participate boolean <span class="nb">false</span>
</pre></div>
</div>
</div>
<div class="section" id="additional-repositories">
<h4><span class="section-number">3.2.7.2. </span>Additional repositories<a class="headerlink" href="#additional-repositories" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line">d-i apt-setup/local0/repository string </div>
<div class="line-block">
<div class="line"><a class="reference external" href="http://local.server/debian">http://local.server/debian</a> stable main</div>
</div>
<div class="line">d-i apt-setup/local0/comment string local server</div>
<div class="line-block">
<div class="line">Enable deb-src lines</div>
</div>
<div class="line">d-i apt-setup/local0/source boolean true</div>
<div class="line-block">
<div class="line">URL to the public key of the local repository; you must provide a key or</div>
<div class="line">apt will complain about the unauthenticated repository and so the</div>
<div class="line">sources.list line will be left commented out</div>
</div>
<div class="line">d-i apt-setup/local0/key string <a class="reference external" href="http://local.server/key">http://local.server/key</a></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">By default the installer requires that repositories be authenticated</div>
<div class="line">using a known gpg key. This setting can be used to disable that</div>
<div class="line">authentication. Warning: Insecure, not recommended.</div>
</div>
<div class="line">d-i debian-installer/allow_unauthenticated boolean true</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">Uncomment this to add multiarch configuration for i386</div>
</div>
<div class="line">d-i apt-setup/multiarch string i386</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="package-selection">
<h4><span class="section-number">3.2.7.3. </span>Package selection<a class="headerlink" href="#package-selection" title="Permalink to this heading"></a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>tasksel tasksel/first multiselect none
</pre></div>
</div>
</div>
<div class="section" id="individual-additional-packages-to-install">
<h4><span class="section-number">3.2.7.4. </span>Individual additional packages to install<a class="headerlink" href="#individual-additional-packages-to-install" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line">d-i pkgsel/include string openssh-server build-essential</div>
<div class="line-block">
<div class="line">Whether to upgrade packages after debootstrap.</div>
<div class="line">Allowed values: none, safe-upgrade, full-upgrade</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i pkgsel/upgrade <span class="k">select</span> none
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">Some versions of the installer can report back on what software you have</div>
<div class="line">installed, and what software you use. The default is not to report back,</div>
<div class="line">but sending reports helps the project determine what software is most</div>
<div class="line">popular and include it on CDs.</div>
</div>
<div class="line">popularity-contest popularity-contest/participate boolean false</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="boot-loader-installation">
<h4><span class="section-number">3.2.7.5. </span>Boot loader installation<a class="headerlink" href="#boot-loader-installation" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line-block">
<div class="line">Grub is the default boot loader (for x86). If you want lilo installed</div>
<div class="line">instead, uncomment this:</div>
</div>
<div class="line">d-i grub-installer/skip boolean true</div>
<div class="line-block">
<div class="line">To also skip installing lilo, and install no bootloader, uncomment this</div>
<div class="line">too:</div>
</div>
<div class="line">d-i lilo-installer/skip boolean true</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">This is fairly safe to set, it makes grub install automatically to the MBR</div>
<div class="line">if no other operating system is detected on the machine.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i grub-installer/only_debian boolean <span class="nb">true</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">This one makes grub-installer install to the MBR if it also finds some other</div>
<div class="line">OS, which is less safe as it might not be able to boot that other OS.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i grub-installer/with_other_os boolean <span class="nb">true</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Due notably to potential USB sticks, the location of the MBR can not be</div>
<div class="line">determined safely in general, so this needs to be specified:</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i grub-installer/bootdev string default
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">To install to the first device (assuming it is not a USB stick):</div>
</div>
<div class="line">d-i grub-installer/bootdev  string default</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">Alternatively, if you want to install to a location other than the mbr,</div>
<div class="line">uncomment and edit these lines:</div>
</div>
<div class="line">d-i grub-installer/only_debian boolean false</div>
<div class="line">d-i grub-installer/with_other_os boolean false</div>
<div class="line">d-i grub-installer/bootdev  string (hd0,1)</div>
<div class="line-block">
<div class="line">To install grub to multiple disks:</div>
</div>
<div class="line">d-i grub-installer/bootdev  string (hd0,1) (hd1,1) (hd2,1)</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="optional-password-for-grub">
<h4><span class="section-number">3.2.7.6. </span>Optional password for grub<a class="headerlink" href="#optional-password-for-grub" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line">d-i grub-installer/password password r00tme</div>
<div class="line">d-i grub-installer/password-again password r00tme</div>
<div class="line-block">
<div class="line">or encrypted using an MD5 hash, see grub-md5-crypt(8).</div>
</div>
<div class="line">d-i grub-installer/password-crypted password [MD5 hash]</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Use the following option to add additional boot parameters for the</div>
<div class="line">installed system (if supported by the bootloader installer).</div>
<div class="line">Note: options passed to the installer will be added automatically.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i debian-installer/add-kernel-opts string nousb
</pre></div>
</div>
</div>
<div class="section" id="finishing-up-the-installation">
<h4><span class="section-number">3.2.7.7. </span>Finishing up the installation<a class="headerlink" href="#finishing-up-the-installation" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line-block">
<div class="line">During installations from serial console, the regular virtual consoles</div>
<div class="line">(VT1-VT6) are normally disabled in /etc/inittab. Uncomment the next</div>
<div class="line">line to prevent this.</div>
</div>
<div class="line">d-i finish-install/keep-consoles boolean true</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="avoid-that-last-message-about-the-install-being-complete">
<h4><span class="section-number">3.2.7.8. </span>Avoid that last message about the install being complete<a class="headerlink" href="#avoid-that-last-message-about-the-install-being-complete" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line">d-i finish-install/reboot_in_progress note</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">This will prevent the installer from ejecting the CD during the reboot,</div>
<div class="line">which is useful in some situations.</div>
</div>
<div class="line">d-i cdrom-detect/eject boolean false</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">This is how to make the installer shutdown when finished, but not</div>
<div class="line">reboot into the installed system.</div>
</div>
<div class="line">d-i debian-installer/exit/halt boolean true</div>
<div class="line-block">
<div class="line">This will power off the machine instead of just halting it.</div>
</div>
<div class="line">d-i debian-installer/exit/poweroff boolean true</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="preseeding-other-packages">
<h4><span class="section-number">3.2.7.9. </span>Preseeding other packages<a class="headerlink" href="#preseeding-other-packages" title="Permalink to this heading"></a></h4>
<div class="line-block">
<div class="line">Depending on what software you choose to install, or if things go wrong</div>
<div class="line">during the installation process, it's possible that other questions may</div>
<div class="line">be asked. You can preseed those too, of course. To get a list of every</div>
<div class="line">possible question that could be asked during an install, do an</div>
<div class="line">installation, and then run these commands:</div>
<div class="line-block">
<div class="line">debconf-get-selections --installer &gt; file</div>
<div class="line">debconf-get-selections &gt;&gt; file</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i finish-install/reboot_in_progress note
</pre></div>
</div>
</div>
<div class="section" id="advanced-options">
<h4><span class="section-number">3.2.7.10. </span>Advanced options<a class="headerlink" href="#advanced-options" title="Permalink to this heading"></a></h4>
<div class="section" id="running-custom-commands-during-the-installation">
<h5><span class="section-number">3.2.7.10.1. </span>Running custom commands during the installation<a class="headerlink" href="#running-custom-commands-during-the-installation" title="Permalink to this heading"></a></h5>
<div class="line-block">
<div class="line">d-i preseeding is inherently not secure. Nothing in the installer checks</div>
<div class="line">for attempts at buffer overflows or other exploits of the values of a</div>
<div class="line">preconfiguration file like this one. Only use preconfiguration files from</div>
<div class="line">trusted locations! To drive that home, and because it's generally useful,</div>
<div class="line">here's a way to run any shell command you'd like inside the installer,</div>
<div class="line">automatically.</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line-block">
<div class="line">This first command is run as early as possible, just after</div>
<div class="line">preseeding is read.</div>
</div>
<div class="line">d-i preseed/early_command string anna-install some-udeb</div>
<div class="line-block">
<div class="line">This command is run immediately before the partitioner starts. It may be</div>
<div class="line">useful to apply dynamic partitioner preseeding that depends on the state</div>
<div class="line">of the disks (which may not be visible when preseed/early_command runs).</div>
</div>
<div class="line">d-i partman/early_command </div>
<div class="line-block">
<div class="line-block">
<div class="line">string debconf-set partman-auto/disk &quot;$(list-devices disk | head -n1)&quot;</div>
</div>
<div class="line">This command is run just before the install finishes, but when there is</div>
<div class="line">still a usable /target directory. You can chroot to /target and use it</div>
<div class="line">directly, or use the apt-install and in-target commands to easily install</div>
<div class="line">packages and run commands in the target system.</div>
</div>
<div class="line">d-i preseed/late_command string apt-install zsh; in-target chsh -s /bin/zsh</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">d-i apt-setup/services-select multiselect security</div>
<div class="line">d-i apt-setup/security_host string security.ubuntu.comd</div>
<div class="line">d-i apt-setup/security_path string /ubuntu</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">d-i pkgsel/include string openssh-server build-essential</div>
<div class="line">d-i pkgsel/upgrade select full-upgrade</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">d-i preseed/run string mkdir /target/install/; cp -R /install/* /target/install/; chroot /target chmod +x /install/postinstall.sh; chroot /target; sh /install/postinstall.sh</div>
<div class="line">d-i preseed/late_command string </div>
<div class="line-block">
<div class="line">in-target bash /install/postinstall.sh</div>
</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="certificate-and-postinstall">
<h5><span class="section-number">3.2.7.10.2. </span>Certificate and postinstall<a class="headerlink" href="#certificate-and-postinstall" title="Permalink to this heading"></a></h5>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>d-i preseed/late_command string mkdir -p /target/install/<span class="p">;</span> cp -Rf /install/* /target/install/<span class="p">;</span>cp -Rf /cdrom/install_ext/* /target/install/<span class="p">;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">in-target apt-get install setools policycoreutils selinux-basics selinux-utils selinux-policy-default selinux-policy-mls auditd policycoreutils-python-utils semanage-utils policycoreutils-gui </div>
<div class="line">in-target selinux-activate</div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">chmod +x /target/install/pii2.sh; cp /target/install/pii2.sh /target/etc/init.d/;  chkconfig --add /target/install/pii2.sh; update-rc.d pii2.sh defaults;</div>
<div class="line">d-i preseed/late_command </div>
<div class="line">in-target chmod +x /install/postinstall.sh</div>
<div class="line">chroot /target; chmod +x /install/postinstall.sh</div>
<div class="line"></div>
<div class="line-block">
<div class="line">in-target mkdir -p /root/.ssh; </div>
<div class="line">in-target chmod 700 /root/.ssh; </div>
<div class="line">in-target chmod 600 /root/.ssh/authorized_keys; </div>
<div class="line">in-target mkdir -p /home/myuser/.ssh; </div>
<div class="line">in-target chmod 700 /home/myuser/.ssh; </div>
<div class="line">in-target chmod 600 /home/myuser/.ssh/authorized_keys; </div>
<div class="line">in-target chown -R myuser:myuser /home/myuser/.ssh/; </div>
<div class="line">in-target mkdir -p /install/; </div>
<div class="line-block">
<div class="line">cp -R /cdrom/install/* /install/;</div>
</div>
<div class="line">in-target chroot /install; </div>
<div class="line">in-target chmod +x /install/postinstall.sh</div>
<div class="line">in-target chroot /install; </div>
</div>
<div class="line">d-i preseed/late_command string </div>
<div class="line">in-target sh /install/postinstall.sh</div>
<div class="line">d-i preseed/late_command string </div>
<div class="line-block">
<div class="line">in-target echo -e &quot;onnnpn1nnnw&quot; | fdisk /dev/sdb1 ; </div>
<div class="line">in-target mkfs.ext4 /dev/sdb1 ; </div>
<div class="line">in-target echo &quot;/dev/sdb1  /srv  ext4  nodiratime  0  2&quot; &gt;&gt; /etc/fstab</div>
</div>
<div class="line">&lt;==---END---==&gt;</div>
</div>
</div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cut_discr_pc.html" class="btn btn-neutral float-left" title="2. ISO InstallDeb Cut Discr" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="full_discr_pii2.html" class="btn btn-neutral float-right" title="4. important" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, BiLymo iOT corp.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>