<!DOCTYPE html>
<html class="writer-html5" lang="ru,en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>7. Appendix Code chunck &mdash; BilSrvStation_Server_PC 1.0.2a documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="8. AutoInstall Cut Discr" href="cut_discr_pii2.html" />
    <link rel="prev" title="4. important" href="full_discr_pii2.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> BilSrvStation_Server_PC
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Содержание:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="sourcelink.html">1. Навигация</a></li>
<li class="toctree-l1"><a class="reference internal" href="cut_discr_pc.html">2. ISO InstallDeb Cut Discr</a></li>
<li class="toctree-l1"><a class="reference internal" href="cut_discr_preseed.html">3. Preseed Cut Discr</a></li>
<li class="toctree-l1"><a class="reference internal" href="full_discr_pii2.html">4. important</a></li>
<li class="toctree-l1"><a class="reference internal" href="full_discr_pii2.html#addr-x">5. [addr]X</a></li>
<li class="toctree-l1"><a class="reference internal" href="full_discr_pii2.html#regexp-x">6. /regexp/X</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">7. Appendix Code chunck</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#chunck-1">7.1. Chunck 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-2">7.2. Chunck 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-3">7.3. Chunck 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-4">7.4. Chunck 4</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-5">7.5. Chunck 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-6">7.6. Chunck 6</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-7">7.7. Chunck 7</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-8">7.8. Chunck 8</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-9">7.9. Chunck 9</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-10">7.10. Chunck 10</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-11">7.11. Chunck 11</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-12">7.12. Chunck 12</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-13">7.13. Chunck 13</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-14">7.14. Chunck 14</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-15">7.15. Chunck 15</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-16">7.16. Chunck 16</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-17">7.17. Chunck 17</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-18">7.18. Chunck 18</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-19">7.19. Chunck 19</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-20">7.20. Chunck 20</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-21">7.21. Chunck 21</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-22">7.22. Chunck 22</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-23">7.23. Chunck 23</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-24">7.24. Chunck 24</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-25">7.25. Chunck 25</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-26">7.26. Chunck 26</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-27">7.27. Chunck 27</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-28">7.28. Chunck 28</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-29">7.29. Chunck 29</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-30">7.30. Chunck 30</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-31">7.31. Chunck 31</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-32">7.32. Chunck 32</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-33">7.33. Chunck 33</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-34">7.34. Chunck 34</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-35">7.35. Chunck 35</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-36">7.36. Chunck 36</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-37">7.37. Chunck 37</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-38">7.38. Chunck 38</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-39">7.39. Chunck 39</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-40">7.40. Chunck 40</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-41">7.41. Chunck 41</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-42">7.42. Chunck 42</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-43">7.43. Chunck 43</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-44">7.44. Chunck 44</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-45">7.45. Chunck 45</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-46">7.46. Chunck 46</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-47">7.47. Chunck 47</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-48">7.48. Chunck 48</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-49">7.49. Chunck 49</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-50">7.50. Chunck 50</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-51">7.51. Chunck 51</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-52">7.52. Chunck 52</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-53">7.53. Chunck 53</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-54">7.54. Chunck 54</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-55">7.55. Chunck 55</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-56">7.56. Chunck 56</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-57">7.57. Chunck 57</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-58">7.58. Chunck 58</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-59">7.59. Chunck 59</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-60">7.60. Chunck 60</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-61">7.61. Chunck 61</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-62">7.62. Chunck 62</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-63">7.63. Chunck 63</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-64">7.64. Chunck 64</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-65">7.65. Chunck 65</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-66">7.66. Chunck 66</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-67">7.67. Chunck 67</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-68">7.68. Chunck 68</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-69">7.69. Chunck 69</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-70">7.70. Chunck 70</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-71">7.71. Chunck 71</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-72">7.72. Chunck 72</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-73">7.73. Chunck 73</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-74">7.74. Chunck 74</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-75">7.75. Chunck 75</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-76">7.76. Chunck 76</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-77">7.77. Chunck 77</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-78">7.78. Chunck 78</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-79">7.79. Chunck 79</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-80">7.80. Chunck 80</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-81">7.81. Chunck 81</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-82">7.82. Chunck 82</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-83">7.83. Chunck 83</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-84">7.84. Chunck 84</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-85">7.85. Chunck 85</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-86">7.86. Chunck 86</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-87">7.87. Chunck 87</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-88">7.88. Chunck 88</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-89">7.89. Chunck 89</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-90">7.90. Chunck 90</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-91">7.91. Chunck 91</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-92">7.92. Chunck 92</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-93">7.93. Chunck 93</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-94">7.94. Chunck 94</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-95">7.95. Chunck 95</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-96">7.96. Chunck 96</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-97">7.97. Chunck 97</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-98">7.98. Chunck 98</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-99">7.99. Chunck 99</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-100">7.100. Chunck 100</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-101">7.101. Chunck 101</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-102">7.102. Chunck 102</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-103">7.103. Chunck 103</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-104">7.104. Chunck 104</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-105">7.105. Chunck 105</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-106">7.106. Chunck 106</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-107">7.107. Chunck 107</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-108">7.108. Chunck 108</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-109">7.109. Chunck 109</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-110">7.110. Chunck 110</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-111">7.111. Chunck 111</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-112">7.112. Chunck 112</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-113">7.113. Chunck 113</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-114">7.114. Chunck 114</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-115">7.115. Chunck 115</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-116">7.116. Chunck 116</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-117">7.117. Chunck 117</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-118">7.118. Chunck 118</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-119">7.119. Chunck 119</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-120">7.120. Chunck 120</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-121">7.121. Chunck 121</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-122">7.122. Chunck 122</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-123">7.123. Chunck 123</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-124">7.124. Chunck 124</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-125">7.125. Chunck 125</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-126">7.126. Chunck 126</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-127">7.127. Chunck 127</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-128">7.128. Chunck 128</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-129">7.129. Chunck 129</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-130">7.130. Chunck 130</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-131">7.131. Chunck 131</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-132">7.132. Chunck 132</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-133">7.133. Chunck 133</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-134">7.134. Chunck 134</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-135">7.135. Chunck 135</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-136">7.136. Chunck 136</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-137">7.137. Chunck 137</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-138">7.138. Chunck 138</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-139">7.139. Chunck 139</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-140">7.140. Chunck 140</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-141">7.141. Chunck 141</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-142">7.142. Chunck 142</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-143">7.143. Chunck 143</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-144">7.144. Chunck 144</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-145">7.145. Chunck 145</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-146">7.146. Chunck 146</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-147">7.147. Chunck 147</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-148">7.148. Chunck 148</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-149">7.149. Chunck 149</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-150">7.150. Chunck 150</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-151">7.151. Chunck 151</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-152">7.152. Chunck 152</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-153">7.153. Chunck 153</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-154">7.154. Chunck 154</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-155">7.155. Chunck 155</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-156">7.156. Chunck 156</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-157">7.157. Chunck 157</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-158">7.158. Chunck 158</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-159">7.159. Chunck 159</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-160">7.160. Chunck 160</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-161">7.161. Chunck 161</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-162">7.162. Chunck 162</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-163">7.163. Chunck 163</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-164">7.164. Chunck 164</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-165">7.165. Chunck 165</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-166">7.166. Chunck 166</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-167">7.167. Chunck 167</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-168">7.168. Chunck 168</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-169">7.169. Chunck 169</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-170">7.170. Chunck 170</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-171">7.171. Chunck 171</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-172">7.172. Chunck 172</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-173">7.173. Chunck 173</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-174">7.174. Chunck 174</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-175">7.175. Chunck 175</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-176">7.176. Chunck 176</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-177">7.177. Chunck 177</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-178">7.178. Chunck 178</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-179">7.179. Chunck 179</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-180">7.180. Chunck 180</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-181">7.181. Chunck 181</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-182">7.182. Chunck 182</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-183">7.183. Chunck 183</a></li>
<li class="toctree-l2"><a class="reference internal" href="#chunck-184">7.184. Chunck 184</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cut_discr_pii2.html">8. AutoInstall Cut Discr</a></li>
<li class="toctree-l1"><a class="reference internal" href="cut_discr_pii2_pack.html">9. AutoInstall Package List</a></li>
<li class="toctree-l1"><a class="reference internal" href="cut_discr_cmd_shell.html">10. CMD_SHELL Cut Discr</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure.html">11. Структура</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_doc.html">12. Построение этой документации</a></li>
<li class="toctree-l1"><a class="reference internal" href="note.html">13. Заметки</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BilSrvStation_Server_PC</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">7. </span>Appendix Code chunck</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/only_code_pii2.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="appendix-code-chunck">
<h1><span class="section-number">7. </span>Appendix Code chunck<a class="headerlink" href="#appendix-code-chunck" title="Permalink to this headline"></a></h1>
<div class="section" id="chunck-1">
<h2><span class="section-number">7.1. </span>Chunck 1<a class="headerlink" href="#chunck-1" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">function</span> jumpto
<span class="linenos"> 2</span><span class="o">{</span>
<span class="linenos"> 3</span><span class="nv">label</span><span class="o">=</span><span class="nv">$1</span>
<span class="linenos"> 4</span><span class="nv">cmd</span><span class="o">=</span><span class="k">$(</span>sed -n <span class="s2">&quot;/</span><span class="nv">$label</span><span class="s2">:/{:a;n;p;ba};&quot;</span> <span class="nv">$0</span> <span class="p">|</span> grep -v <span class="s1">&#39;:$&#39;</span><span class="k">)</span>
<span class="linenos"> 5</span><span class="nb">eval</span> <span class="s2">&quot;</span><span class="nv">$cmd</span><span class="s2">&quot;</span>
<span class="linenos"> 6</span><span class="nb">exit</span>
<span class="linenos"> 7</span><span class="o">}</span>
<span class="linenos"> 8</span><span class="k">function</span> reinterfaces
<span class="linenos"> 9</span><span class="o">{</span>
<span class="linenos">10</span><span class="nb">cd</span> /etc/network/
</pre></div>
</div>
</div>
<div class="section" id="chunck-2">
<h2><span class="section-number">7.2. </span>Chunck 2<a class="headerlink" href="#chunck-2" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nv">BUF</span><span class="o">=</span><span class="s2">&quot;# This file describes the network interfaces available on your system\n</span>
<span class="linenos"> 2</span><span class="s2">        # and how to activate them. For more information, see interfaces(5).\n</span>
<span class="linenos"> 3</span><span class="s2">        \n</span>
<span class="linenos"> 4</span><span class="s2">        source /etc/network/interfaces.d/*\n</span>
<span class="linenos"> 5</span><span class="s2">        \n</span>
<span class="linenos"> 6</span><span class="s2">        # The loopback network interface\n</span>
<span class="linenos"> 7</span><span class="s2">        auto lo\n</span>
<span class="linenos"> 8</span><span class="s2">        iface lo inet loopback\n</span>
<span class="linenos"> 9</span><span class="s2">        \n</span>
<span class="linenos">10</span><span class="s2">        # The Primary\n</span>
<span class="linenos">11</span><span class="s2">        allow-hotplug en\n</span>
<span class="linenos">12</span><span class="s2">        iface en inet dhcp\n&quot;</span><span class="p">;</span>
<span class="linenos">13</span>rm interfaces
<span class="linenos">14</span>touch interfaces
<span class="linenos">15</span><span class="nb">echo</span> -e <span class="nv">$BUF</span> &gt; interfaces<span class="p">;</span>
<span class="linenos">16</span><span class="o">}</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="nv">start</span><span class="o">=</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="s2">&quot;start&quot;</span><span class="si">}</span>
<span class="linenos">19</span><span class="nv">interface_sh</span><span class="o">=</span><span class="si">${</span><span class="nv">2</span><span class="k">:-</span><span class="s2">&quot;interface_sh&quot;</span><span class="si">}</span>
<span class="linenos">20</span><span class="nv">step_one</span><span class="o">=</span><span class="si">${</span><span class="nv">3</span><span class="k">:-</span><span class="s2">&quot;step_one&quot;</span><span class="si">}</span>
<span class="linenos">21</span><span class="nv">step_two</span><span class="o">=</span><span class="si">${</span><span class="nv">4</span><span class="k">:-</span><span class="s2">&quot;step_two&quot;</span><span class="si">}</span>
<span class="linenos">22</span><span class="nv">step_three</span><span class="o">=</span><span class="si">${</span><span class="nv">5</span><span class="k">:-</span><span class="s2">&quot;step_three&quot;</span><span class="si">}</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-3">
<h2><span class="section-number">7.3. </span>Chunck 3<a class="headerlink" href="#chunck-3" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nb">export</span> <span class="nv">LC_ALL</span><span class="o">=</span>ru_RU.UTF-8
<span class="linenos"> 2</span><span class="nv">FILES</span><span class="o">=</span><span class="s2">&quot;steps.txt&quot;</span>
<span class="linenos"> 3</span><span class="nv">BUF</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="linenos"> 4</span><span class="nv">TMPS</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="linenos"> 5</span><span class="nv">COUNT</span><span class="o">=</span><span class="m">0</span><span class="p">;</span>
<span class="linenos"> 6</span><span class="nv">DEB_VER</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="linenos"> 7</span><span class="nv">NET_EN</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="linenos"> 8</span><span class="nv">NET_WI</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="linenos"> 9</span><span class="nv">STATE</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">;</span>
<span class="linenos">10</span><span class="nv">PORT_SSH</span><span class="o">=</span><span class="s2">&quot;4103&quot;</span>
<span class="linenos">11</span><span class="nv">NET_ARR</span><span class="o">=()</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-4">
<h2><span class="section-number">7.4. </span>Chunck 4<a class="headerlink" href="#chunck-4" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">if</span> <span class="o">[[</span> <span class="nv">$EUID</span> -ne <span class="m">0</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos"> 2</span>        <span class="k">if</span> <span class="o">[[</span> <span class="si">${</span><span class="nv">LANG</span><span class="p">:</span><span class="nv">0</span><span class="p">:</span><span class="nv">5</span><span class="si">}</span> -eq <span class="s1">&#39;ru_RU&#39;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos"> 3</span>                <span class="nb">echo</span> <span class="s2">&quot;Ошибка скрипта перезапустите скрипт на root&quot;</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="linenos"> 4</span>        <span class="k">else</span>
<span class="linenos"> 5</span>                <span class="nb">echo</span> <span class="s2">&quot;This script must be run as root&quot;</span> <span class="m">1</span>&gt;<span class="p">&amp;</span><span class="m">2</span>
<span class="linenos"> 6</span>        <span class="k">fi</span>
<span class="linenos"> 7</span>        <span class="nb">exit</span> <span class="m">1</span><span class="p">;</span>
<span class="linenos"> 8</span><span class="k">fi</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="k">if</span> <span class="o">[[</span> ! -f <span class="s2">&quot;</span><span class="nv">$FILES</span><span class="s2">&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">11</span>        touch steps.txt
<span class="linenos">12</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-5">
<h2><span class="section-number">7.5. </span>Chunck 5<a class="headerlink" href="#chunck-5" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">select</span> opt in Auto PoluAuto Hands Exit<span class="p">;</span> <span class="k">do</span>
<span class="linenos"> 2</span><span class="k">case</span> <span class="nv">$opt</span> in
<span class="linenos"> 3</span>Auto<span class="o">)</span>
<span class="linenos"> 4</span>                <span class="nb">echo</span> -n <span class="s2">&quot;Сейчас будет произведена автоматическая найстройка &quot;</span><span class="p">;</span>
<span class="linenos"> 5</span>                sleep <span class="m">3</span><span class="p">;</span>
<span class="linenos"> 6</span>                jumpto start
<span class="linenos"> 7</span><span class="p">;;</span>
<span class="linenos"> 8</span>        Polstart<span class="o">)</span>
<span class="linenos"> 9</span>                <span class="nb">echo</span> -n <span class="s2">&quot;В разработке...&quot;</span><span class="p">;</span>
<span class="linenos">10</span><span class="p">;;</span>
<span class="linenos">11</span>Hands<span class="o">)</span>
<span class="linenos">12</span>                <span class="nb">echo</span> -n <span class="s2">&quot;В разработке...&quot;</span><span class="p">;</span>
<span class="linenos">13</span><span class="p">;;</span>
<span class="linenos">14</span>Exit<span class="o">)</span>
<span class="linenos">15</span><span class="nb">exit</span> <span class="m">1</span><span class="p">;</span>
<span class="linenos">16</span><span class="p">;;</span>
<span class="linenos">17</span>*<span class="o">)</span>
<span class="linenos">18</span><span class="nb">echo</span> <span class="s2">&quot;Недопустимая опция </span><span class="nv">$REPLY</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="linenos">19</span><span class="p">;;</span>
<span class="linenos">20</span><span class="k">esac</span>
<span class="linenos">21</span><span class="k">done</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-6">
<h2><span class="section-number">7.6. </span>Chunck 6<a class="headerlink" href="#chunck-6" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>jumpto <span class="nv">$start</span>
<span class="linenos">2</span>
<span class="linenos">3</span>start:
</pre></div>
</div>
</div>
<div class="section" id="chunck-7">
<h2><span class="section-number">7.7. </span>Chunck 7<a class="headerlink" href="#chunck-7" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>: <span class="si">${</span><span class="nv">HOSTNAME</span><span class="p">?</span><span class="si">}</span> <span class="si">${</span><span class="nv">USER</span><span class="p">?</span><span class="si">}</span> <span class="si">${</span><span class="nv">HOME</span><span class="p">?</span><span class="si">}</span> <span class="si">${</span><span class="nv">MAIL</span><span class="p">?</span><span class="si">}</span>
<span class="linenos"> 2</span><span class="nb">echo</span>
<span class="linenos"> 3</span><span class="nb">echo</span> <span class="s2">&quot;Имя машины: </span><span class="nv">$HOSTNAME</span><span class="s2">.&quot;</span>
<span class="linenos"> 4</span><span class="nb">echo</span> <span class="s2">&quot;Ваше имя: </span><span class="nv">$USER</span><span class="s2">.&quot;</span>
<span class="linenos"> 5</span><span class="nb">echo</span> <span class="s2">&quot;Ваш домашний каталог: </span><span class="nv">$HOME</span><span class="s2">.&quot;</span>
<span class="linenos"> 6</span><span class="nb">echo</span> <span class="s2">&quot;Ваш почтовый ящик: </span><span class="nv">$MAIL</span><span class="s2">.&quot;</span>
<span class="linenos"> 7</span><span class="nb">echo</span>
<span class="linenos"> 8</span><span class="nb">echo</span> <span class="s2">&quot;Если перед Вами появилось это сообщение,&quot;</span>
<span class="linenos"> 9</span><span class="nb">echo</span> <span class="s2">&quot;то это значит, что все критические переменные окружения установлены.&quot;</span>
<span class="linenos">10</span><span class="nb">echo</span>
<span class="linenos">11</span><span class="nb">echo</span> <span class="s2">&quot;Сейчас будет установлена postinstall настройка&quot;</span>
<span class="linenos">12</span><span class="nb">echo</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="nb">cd</span> /etc/apt/
<span class="linenos">15</span>cp sources.list sources.tmp
</pre></div>
</div>
</div>
<div class="section" id="chunck-8">
<h2><span class="section-number">7.8. </span>Chunck 8<a class="headerlink" href="#chunck-8" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nv">TMPS</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">;</span>
<span class="linenos">2</span>interface_sh:
<span class="linenos">3</span>
<span class="linenos">4</span><span class="nb">cd</span> /install/
<span class="linenos">5</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span>sed -n -e <span class="s2">&quot;s/^\(1_settings_interface_with_wifi\).*/\1/p&quot;</span> steps.txt<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-9">
<h2><span class="section-number">7.9. </span>Chunck 9<a class="headerlink" href="#chunck-9" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">cd</span> /etc/network/
</pre></div>
</div>
</div>
<div class="section" id="chunck-10">
<h2><span class="section-number">7.10. </span>Chunck 10<a class="headerlink" href="#chunck-10" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="o">[[</span> ! -f /etc/network/interfaces <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">2</span>        touch interfaces
<span class="linenos">3</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-11">
<h2><span class="section-number">7.11. </span>Chunck 11<a class="headerlink" href="#chunck-11" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>cp interfaces interfaces.back
</pre></div>
</div>
</div>
<div class="section" id="chunck-12">
<h2><span class="section-number">7.12. </span>Chunck 12<a class="headerlink" href="#chunck-12" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nv">COUNT</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>
<span class="linenos"> 2</span><span class="nv">NET_EN</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">while</span> <span class="o">[[</span> -n <span class="k">$(</span> ip addr <span class="p">|</span> sed -n -e <span class="s2">&quot;s/.*</span><span class="nv">$COUNT</span><span class="s2">\:\s\(.*\)\:\s&lt;.*/\1/p&quot;</span><span class="k">)</span> <span class="o">]]</span>
<span class="linenos"> 5</span><span class="k">do</span>
<span class="linenos"> 6</span>NET_ARR<span class="o">[</span>COUNT<span class="o">]=</span><span class="k">$(</span> ip addr <span class="p">|</span> sed -n -e <span class="s2">&quot;s/.*</span><span class="nv">$COUNT</span><span class="s2">\:\s\(.*\)\:\s&lt;.*/\1/p&quot;</span><span class="k">)</span><span class="p">;</span>
<span class="linenos"> 7</span><span class="nb">echo</span> Counter: <span class="nv">$COUNT</span> <span class="nv">$NET_EN</span><span class="p">;</span>
<span class="linenos"> 8</span><span class="o">((</span>COUNT++<span class="o">))</span><span class="p">;</span>
<span class="linenos"> 9</span><span class="k">done</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="nv">COUNT</span><span class="o">=</span><span class="m">0</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-13">
<h2><span class="section-number">7.13. </span>Chunck 13<a class="headerlink" href="#chunck-13" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">for</span> COUNT in <span class="si">${</span><span class="nv">NET_ARR</span><span class="p">[@]</span><span class="si">}</span>
<span class="linenos"> 2</span><span class="k">do</span>
<span class="linenos"> 3</span>        <span class="k">if</span> <span class="o">[[</span> -n <span class="k">$(</span><span class="nb">echo</span> <span class="nv">$NET_ARR</span><span class="o">[</span><span class="nv">$COUNT</span><span class="o">]</span> <span class="p">|</span> sed -n -e <span class="s1">&#39;s/en\(.*\).*/\1/p&#39;</span><span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos"> 4</span>                <span class="nv">NET_EN</span><span class="o">=</span><span class="nv">$COUNT</span><span class="p">;</span>
<span class="linenos"> 5</span>        <span class="k">fi</span>
<span class="linenos"> 6</span>        <span class="k">if</span> <span class="o">[[</span> -n <span class="k">$(</span><span class="nb">echo</span> <span class="nv">$NET_ARR</span><span class="o">[</span><span class="nv">$COUNT</span><span class="o">]</span> <span class="p">|</span> sed -n -e <span class="s1">&#39;s/wl\(.*\).*/\1/p&#39;</span><span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos"> 7</span>                <span class="nv">NET_WI</span><span class="o">=</span><span class="nv">$COUNT</span><span class="p">;</span>
<span class="linenos"> 8</span>        <span class="k">fi</span>
<span class="linenos"> 9</span><span class="k">done</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="nv">COUNT</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">;</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="k">if</span> <span class="o">[[</span> -n <span class="nv">$NET_EN</span> <span class="o">&amp;&amp;</span> -n <span class="nv">$NET_WI</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">14</span>        <span class="nv">STATE</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">;</span>
<span class="linenos">15</span><span class="k">elif</span> <span class="o">[[</span> -n <span class="nv">$NET_EN</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">16</span>        <span class="nv">STATE</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">;</span>
<span class="linenos">17</span><span class="k">else</span>
<span class="linenos">18</span>        <span class="nb">echo</span> <span class="s2">&quot;Error: not search lan interfaces&quot;</span><span class="p">;</span>
<span class="linenos">19</span>        sleep <span class="m">1</span><span class="p">;</span>
<span class="linenos">20</span>        <span class="nb">exit</span> <span class="m">2</span><span class="p">;</span>
<span class="linenos">21</span><span class="k">fi</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-14">
<h2><span class="section-number">7.14. </span>Chunck 14<a class="headerlink" href="#chunck-14" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span> egrep -n <span class="s1">&#39;^[a-z] || ^#&#39;</span> interfaces<span class="k">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$TMPS</span> -eq <span class="s2">&quot;0&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">2</span>reinterfaces
<span class="linenos">3</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-15">
<h2><span class="section-number">7.15. </span>Chunck 15<a class="headerlink" href="#chunck-15" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-16">
<h2><span class="section-number">7.16. </span>Chunck 16<a class="headerlink" href="#chunck-16" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nv">TMPS</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-17">
<h2><span class="section-number">7.17. </span>Chunck 17<a class="headerlink" href="#chunck-17" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="o">[[</span> <span class="nv">$STATE</span> -eq <span class="s2">&quot;0&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-18">
<h2><span class="section-number">7.18. </span>Chunck 18<a class="headerlink" href="#chunck-18" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span>sed -n -e <span class="s2">&quot;s/\(source \/etc\/network\/interfaces/\\).*/\1/p&quot;</span> interfaces<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos"> 2</span>                <span class="nv">TMPS</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">;</span>
<span class="linenos"> 3</span>                reinterfaces<span class="p">;</span>
<span class="linenos"> 4</span><span class="k">fi</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span>sed -n -e <span class="s2">&quot;s/\(auto\slo\).*/\1/p&quot;</span> interfaces<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos"> 7</span>                <span class="nv">TMPS</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">;</span>
<span class="linenos"> 8</span>                reinterfaces<span class="p">;</span>
<span class="linenos"> 9</span><span class="k">fi</span>
<span class="linenos">10</span>sed -i -e <span class="s2">&quot;s/\(auto\s\).*/\1</span><span class="nv">$NET_WI</span><span class="s2"> </span><span class="nv">$NET_EN</span><span class="s2">/g&quot;</span> interfaces
</pre></div>
</div>
</div>
<div class="section" id="chunck-19">
<h2><span class="section-number">7.19. </span>Chunck 19<a class="headerlink" href="#chunck-19" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span> sed -n -e <span class="s2">&quot;s/\(iface\slo\).*/\1/p&quot;</span> interfaces<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">2</span>                <span class="nv">TMPS</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">;</span>
<span class="linenos">3</span>                reinterfaces<span class="p">;</span>
<span class="linenos">4</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-20">
<h2><span class="section-number">7.20. </span>Chunck 20<a class="headerlink" href="#chunck-20" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/iface\slo.*/iface </span><span class="nv">$NET_EN</span><span class="s2"> inet dhcp/g&quot;</span> interfaces
</pre></div>
</div>
</div>
<div class="section" id="chunck-21">
<h2><span class="section-number">7.21. </span>Chunck 21<a class="headerlink" href="#chunck-21" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span> sed -n -e <span class="s2">&quot;s/\(allow-hotplug\s\).*/\1/p&quot;</span> interfaces<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">2</span>                <span class="nv">TMPS</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">;</span>
<span class="linenos">3</span>                reinterfaces<span class="p">;</span>
<span class="linenos">4</span><span class="k">fi</span>
<span class="linenos">5</span>sed -i -e <span class="s2">&quot;s/\(allow-hotplug\s\).*/\1</span><span class="nv">$NET_WI</span><span class="s2">/g&quot;</span> interfaces
</pre></div>
</div>
</div>
<div class="section" id="chunck-22">
<h2><span class="section-number">7.22. </span>Chunck 22<a class="headerlink" href="#chunck-22" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span> sed -n -e <span class="s2">&quot;s/\(iface\s\).*/\1/p&quot;</span> interfaces<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">2</span>                <span class="nv">TMPS</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">;</span>
<span class="linenos">3</span>                reinterfaces<span class="p">;</span>
<span class="linenos">4</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-23">
<h2><span class="section-number">7.23. </span>Chunck 23<a class="headerlink" href="#chunck-23" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span><span class="nv">$a</span><span class="s2"> s/\(iface\s\).*/\1</span><span class="nv">$NET_WI</span><span class="s2"> inet dhcp/g&quot;</span> interfaces
</pre></div>
</div>
</div>
<div class="section" id="chunck-24">
<h2><span class="section-number">7.24. </span>Chunck 24<a class="headerlink" href="#chunck-24" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed <span class="s1">&#39;$a wpa-conf \/home\/rootsu\/wpa_supplicant.conf&#39;</span> interfaces &gt;&gt; interfaces<span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-25">
<h2><span class="section-number">7.25. </span>Chunck 25<a class="headerlink" href="#chunck-25" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>systemctl restart wpa_supplicant
</pre></div>
</div>
</div>
<div class="section" id="chunck-26">
<h2><span class="section-number">7.26. </span>Chunck 26<a class="headerlink" href="#chunck-26" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">else</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span>sed -n -e <span class="s2">&quot;s/\(source \/etc\/network\/interfaces/\\).*/\1/p&quot;</span> interfaces<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">4</span>                <span class="nv">TMPS</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">;</span>
<span class="linenos">5</span>                reinterfaces<span class="p">;</span>
<span class="linenos">6</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-27">
<h2><span class="section-number">7.27. </span>Chunck 27<a class="headerlink" href="#chunck-27" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span>sed -n -e <span class="s2">&quot;s/\(auto\slo\).*/\1/p&quot;</span> interfaces<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">2</span>                <span class="nv">TMPS</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">;</span>
<span class="linenos">3</span>                reinterfaces<span class="p">;</span>
<span class="linenos">4</span><span class="k">fi</span>
<span class="linenos">5</span>sed -i -e <span class="s2">&quot;s/\(auto\s\).*/\1</span><span class="nv">$NET_EN</span><span class="s2">/g&quot;</span> interfaces
</pre></div>
</div>
</div>
<div class="section" id="chunck-28">
<h2><span class="section-number">7.28. </span>Chunck 28<a class="headerlink" href="#chunck-28" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span>sed -n -e <span class="s2">&quot;s/\(iface\slo\).*/\1/p&quot;</span> interfaces<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">2</span>                <span class="nv">TMPS</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">;</span>
<span class="linenos">3</span>                reinterfaces<span class="p">;</span>
<span class="linenos">4</span><span class="k">fi</span>
<span class="linenos">5</span>sed -i -e <span class="s2">&quot;s/iface\slo.*/iface </span><span class="nv">$NET_EN</span><span class="s2"> inet dhcp/g&quot;</span> interfaces
</pre></div>
</div>
</div>
<div class="section" id="chunck-29">
<h2><span class="section-number">7.29. </span>Chunck 29<a class="headerlink" href="#chunck-29" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span>sed -n -e <span class="s2">&quot;s/\(allow-hotplug\s\).*/\1/p&quot;</span> interfaces<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">2</span>                <span class="nv">TMPS</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">;</span>
<span class="linenos">3</span>                reinterfaces<span class="p">;</span>
<span class="linenos">4</span><span class="k">fi</span>
<span class="linenos">5</span>sed -i -e <span class="s2">&quot;s/\(allow-hotplug\s\).*/\1</span><span class="nv">$NET_EN</span><span class="s2">/g&quot;</span> interfaces
</pre></div>
</div>
</div>
<div class="section" id="chunck-30">
<h2><span class="section-number">7.30. </span>Chunck 30<a class="headerlink" href="#chunck-30" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span>sed -n -e <span class="s2">&quot;s/\(iface\s\).*/\1/p&quot;</span> interfaces<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">2</span>                <span class="nv">TMPS</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">;</span>
<span class="linenos">3</span>                reinterfaces<span class="p">;</span>
<span class="linenos">4</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-31">
<h2><span class="section-number">7.31. </span>Chunck 31<a class="headerlink" href="#chunck-31" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span><span class="nv">$a</span><span class="s2"> s/\(iface\s\).*/\1</span><span class="nv">$NET_EN</span><span class="s2"> inet dhcp/g&quot;</span> interfaces
</pre></div>
</div>
</div>
<div class="section" id="chunck-32">
<h2><span class="section-number">7.32. </span>Chunck 32<a class="headerlink" href="#chunck-32" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-33">
<h2><span class="section-number">7.33. </span>Chunck 33<a class="headerlink" href="#chunck-33" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>systemctl restart networking
<span class="linenos">2</span>
<span class="linenos">3</span><span class="nb">cd</span> /install/
<span class="linenos">4</span><span class="nb">echo</span> -e <span class="s2">&quot;1_settings_interface_with_wifi&quot;</span> &gt;&gt; steps.txt
<span class="linenos">5</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-34">
<h2><span class="section-number">7.34. </span>Chunck 34<a class="headerlink" href="#chunck-34" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>step_one:
<span class="linenos">2</span>
<span class="linenos">3</span><span class="nb">cd</span> /install/
<span class="linenos">4</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span>sed -n -e <span class="s2">&quot;s/^\(1_src_list\).*/\1/p&quot;</span> steps.txt<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">5</span>
<span class="linenos">6</span><span class="nb">cd</span> /etc/apt/
<span class="linenos">7</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span> lsb_release -d <span class="p">|</span> sed -n -e <span class="s1">&#39;s/.*(\([^\)]\+\))/\1/p&#39;</span><span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-35">
<h2><span class="section-number">7.35. </span>Chunck 35<a class="headerlink" href="#chunck-35" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>        <span class="nv">DEB_VER</span><span class="o">=</span><span class="k">$(</span>cat /etc/os-release <span class="p">|</span> sed -n -e <span class="s2">&quot;s/.*(\([^\)].*\))\&quot;</span>$<span class="s2">/\1/p&quot;</span><span class="k">)</span><span class="p">;</span>
<span class="linenos">2</span>        <span class="nv">DEB_VER</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$DEB_VER</span> <span class="p">|</span> sed -n -e <span class="s2">&quot;s/\([a-z]*\)</span>$<span class="s2">//p&quot;</span><span class="k">)</span>
<span class="linenos">3</span><span class="k">else</span>
<span class="linenos">4</span>        <span class="nv">DEB_VER</span><span class="o">=</span><span class="k">$(</span> lsb_release -d <span class="p">|</span> sed -n -e <span class="s1">&#39;s/.*(\([^\)]\+\))/\1/p&#39;</span><span class="k">)</span>
<span class="linenos">5</span><span class="k">fi</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-36">
<h2><span class="section-number">7.36. </span>Chunck 36<a class="headerlink" href="#chunck-36" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="o">[[</span> -n <span class="k">$(</span>egrep -n <span class="s1">&#39;^[a-z] &amp;&amp; ^#&#39;</span> sources.list<span class="k">)</span> <span class="o">&amp;&amp;</span> -n <span class="k">$(</span> sed -n -e <span class="s2">&quot;s/^deb http:\/\/ftp//p&quot;</span> sources.list<span class="k">)</span> <span class="o">&amp;&amp;</span> -n <span class="k">$(</span> sed -n -e <span class="s2">&quot;s/^deb-src http:\/\/ftp//p&quot;</span> sources.list<span class="k">)</span> <span class="o">&amp;&amp;</span> -n <span class="k">$(</span> sed -n -e <span class="s2">&quot;s/^deb http:\/\/deb//p&quot;</span> sources.list<span class="k">)</span> <span class="o">&amp;&amp;</span> -n <span class="k">$(</span> sed -n -e <span class="s2">&quot;s/^deb-src http:\/\/deb//p&quot;</span> sources.list<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">2</span><span class="nv">STATE</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">;</span>
<span class="linenos">3</span>rm sources.list<span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-37">
<h2><span class="section-number">7.37. </span>Chunck 37<a class="headerlink" href="#chunck-37" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nv">BUF</span><span class="o">=</span><span class="s2">&quot;#deb cdrom:[Debian GNU/Linux _*_ - Official amd64 NETINST 20210814-10:07]/ * main\ndeb http://ftp.debian.org/debian/ </span><span class="nv">$DEB_VER</span><span class="s2"> main non-free contrib\ndeb-src http://ftp.debian.org/debian/ </span><span class="nv">$DEB_VER</span><span class="s2"> main non-free contrib\n</span>
<span class="linenos"> 2</span><span class="s2">\ndeb http://security.debian.org/debian-security/ </span><span class="nv">$DEB_VER</span><span class="s2">-security main contrib non-free \ndeb-src http://security.debian.org/debian-security/ </span><span class="nv">$DEB_VER</span><span class="s2">-security main contrib non-free \n</span>
<span class="linenos"> 3</span><span class="s2">\n# *-updates, to get updates before a point release is made; \r\n# see https://www.debian.org/doc/manuals/debian-reference/ch02.en.html#_updates_and_backports \ndeb http://deb.debian.org/debian/ </span><span class="nv">$DEB_VER</span><span class="s2">-updates main contrib non-free \ndeb-src http://deb.debian.org/debian/ </span><span class="nv">$DEB_VER</span><span class="s2">-updates main contrib non-free \n</span>
<span class="linenos"> 4</span><span class="s2">\n</span>
<span class="linenos"> 5</span><span class="s2">        # This system was installed using small removable media \n</span>
<span class="linenos"> 6</span><span class="s2">        # (e.g. netinst, live or single CD). The matching \&quot;deb cdrom\&quot; \n</span>
<span class="linenos"> 7</span><span class="s2">        # entries were disabled at the end of the installation process. \n</span>
<span class="linenos"> 8</span><span class="s2">        # For information about how to configure apt package sources, \n</span>
<span class="linenos"> 9</span><span class="s2">        # see the sources.list(5) manual. \n&quot;</span>
<span class="linenos">10</span><span class="nb">echo</span> -e <span class="nv">$BUF</span> &gt; sources.list<span class="p">;</span>
<span class="linenos">11</span><span class="nb">echo</span> <span class="s2">&quot;Info: sources.list is null&quot;</span><span class="p">;</span>
<span class="linenos">12</span>sleep <span class="m">1</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-38">
<h2><span class="section-number">7.38. </span>Chunck 38<a class="headerlink" href="#chunck-38" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">else</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-39">
<h2><span class="section-number">7.39. </span>Chunck 39<a class="headerlink" href="#chunck-39" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span> sed -i -e <span class="s2">&quot;s/</span><span class="nv">$DEB_VER</span><span class="s2">\s.*</span>$<span class="s2">/</span><span class="nv">$DEB_VER</span><span class="s2"> main contrib non-free/g&quot;</span> sources.list
<span class="linenos"> 2</span> sed -i -e <span class="s2">&quot;s/\(\/\s</span><span class="nv">$DEB_VER</span><span class="s2">\-[a-z]*\).*/\1 main contrib non-free/g&quot;</span> sources.list
<span class="linenos"> 3</span><span class="k">fi</span><span class="p">;</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get update<span class="p">;</span>
<span class="linenos"> 6</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get full-upgrade<span class="p">;</span>
<span class="linenos"> 7</span><span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos"> 8</span> <span class="nb">echo</span> <span class="s2">&quot;Error: full upgrade error!!!&quot;</span>
<span class="linenos"> 9</span> <span class="nb">exit</span> <span class="m">1</span>
<span class="linenos">10</span><span class="k">fi</span>
<span class="linenos">11</span><span class="nb">echo</span> -e <span class="s2">&quot;y\ny\ny\ny\n&quot;</span> <span class="p">|</span> apt-get install console-setup<span class="p">;</span>
<span class="linenos">12</span><span class="nb">cd</span> /install/
<span class="linenos">13</span><span class="nb">echo</span> -e <span class="s2">&quot;1_src_list&quot;</span> &gt;&gt; steps.txt
<span class="linenos">14</span>
<span class="linenos">15</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-40">
<h2><span class="section-number">7.40. </span>Chunck 40<a class="headerlink" href="#chunck-40" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>step_two:
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="nb">cd</span> /install/
<span class="linenos"> 4</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span>sed -n -e <span class="s2">&quot;s/^\(2_install_driver\).*/\1/p&quot;</span> steps.txt<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">if</span> <span class="o">[[</span> <span class="k">$(</span>lspci <span class="p">|</span> grep VGA <span class="p">|</span> sed -n -e <span class="s2">&quot;s/.*\[\(.*\)\/.*/\1/p&quot;</span><span class="k">)</span> <span class="o">==</span> <span class="s2">&quot;AMD&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos"> 7</span>        <span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install libdrm-amdgpu1
<span class="linenos"> 8</span>        <span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install xserver-xorg-video-amdgpu
<span class="linenos"> 9</span><span class="k">else</span>
<span class="linenos">10</span>        <span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install nvidia-driver firmware-misc-nonfree nvidia-settings
<span class="linenos">11</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-41">
<h2><span class="section-number">7.41. </span>Chunck 41<a class="headerlink" href="#chunck-41" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install firmware-linux
<span class="linenos">2</span>
<span class="linenos">3</span><span class="k">if</span> <span class="o">[[</span> <span class="k">$(</span>lspci <span class="p">|</span> grep Ethernet <span class="p">|</span> sed -n -e <span class="s2">&quot;s/.*ller:\s\([a-zA-Z]\+\s\).*/\1/p&quot;</span><span class="k">)</span> <span class="o">==</span> <span class="s2">&quot;Realtek&quot;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">4</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install firmware-realtek
<span class="linenos">5</span><span class="k">fi</span>
<span class="linenos">6</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install firmware-linux-nonfree
<span class="linenos">7</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install man
</pre></div>
</div>
</div>
<div class="section" id="chunck-42">
<h2><span class="section-number">7.42. </span>Chunck 42<a class="headerlink" href="#chunck-42" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install acl
<span class="linenos">2</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install setools policycoreutils selinux-basics selinux-utils selinux-policy-default selinux-policy-mls auditd policycoreutils-python-utils semanage-utils audispd-plugins
<span class="linenos">3</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install mcstrans
<span class="linenos">4</span>
<span class="linenos">5</span>sudo systemctl <span class="nb">enable</span> auditd
<span class="linenos">6</span>sudo systemctl start auditd
</pre></div>
</div>
</div>
<div class="section" id="chunck-43">
<h2><span class="section-number">7.43. </span>Chunck 43<a class="headerlink" href="#chunck-43" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>touch /.autorelabel
<span class="linenos">2</span>selinux-activate
<span class="linenos">3</span>
<span class="linenos">4</span><span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">5</span> <span class="nb">echo</span> <span class="s2">&quot;Error: install driver failed!!!&quot;</span>
<span class="linenos">6</span> <span class="nb">exit</span> <span class="m">1</span>
<span class="linenos">7</span><span class="k">fi</span>
<span class="linenos">8</span>
<span class="linenos">9</span><span class="nb">echo</span> -e <span class="s2">&quot;2_install_driver&quot;</span> &gt;&gt; steps.txt
</pre></div>
</div>
</div>
<div class="section" id="chunck-44">
<h2><span class="section-number">7.44. </span>Chunck 44<a class="headerlink" href="#chunck-44" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>reboot
<span class="linenos">2</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-45">
<h2><span class="section-number">7.45. </span>Chunck 45<a class="headerlink" href="#chunck-45" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span>sed -n -e <span class="s2">&quot;s/^\(3_nanorc\).*/\1/p&quot;</span> steps.txt<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-46">
<h2><span class="section-number">7.46. </span>Chunck 46<a class="headerlink" href="#chunck-46" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install git
<span class="linenos">2</span><span class="k">if</span> <span class="o">[</span>
<span class="linenos">3</span>? -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">4</span> <span class="nb">echo</span> <span class="s2">&quot;Error: error install git!!!&quot;</span>
<span class="linenos">5</span> <span class="nb">exit</span> <span class="m">1</span><span class="p">;</span>
<span class="linenos">6</span><span class="k">fi</span>
<span class="linenos">7</span><span class="nb">cd</span> /install
<span class="linenos">8</span>git clone git://git.savannah.gnu.org/nano.git<span class="p">;</span> <span class="nb">cd</span> nano<span class="p">;</span>./autogen.sh<span class="p">;</span>./configure<span class="p">;</span> make install
</pre></div>
</div>
</div>
<div class="section" id="chunck-47">
<h2><span class="section-number">7.47. </span>Chunck 47<a class="headerlink" href="#chunck-47" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>find /usr/share/nano -name <span class="s1">&#39;*.nanorc&#39;</span> -printf <span class="s2">&quot;include %p\n&quot;</span> &gt; ~/.nanorc
</pre></div>
</div>
</div>
<div class="section" id="chunck-48">
<h2><span class="section-number">7.48. </span>Chunck 48<a class="headerlink" href="#chunck-48" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">fi</span>
<span class="linenos">2</span><span class="nb">echo</span> -e <span class="s2">&quot;3_nanorc&quot;</span> &gt;&gt; steps.txt
</pre></div>
</div>
</div>
<div class="section" id="chunck-49">
<h2><span class="section-number">7.49. </span>Chunck 49<a class="headerlink" href="#chunck-49" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span>sed -n -e <span class="s2">&quot;s/^\(4_copy_sh\).*/\1/p&quot;</span> steps.txt<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-50">
<h2><span class="section-number">7.50. </span>Chunck 50<a class="headerlink" href="#chunck-50" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">cd</span> /install/
<span class="linenos">2</span>cp -Rf /install/home/* /home/
<span class="linenos">3</span>cp -Rf /install/home/rootsu/.bashrc ~root
<span class="linenos">4</span>cp -Rf /install/home/rootsu/.profile ~root
<span class="linenos">5</span>cp -Rf /install/home/rootsu/.cmd_shell.sh ~root
<span class="linenos">6</span>
<span class="linenos">7</span>cp -Rf /install/home/rootsu/* ~root
<span class="linenos">8</span>chmod ug+rwx -Rf ~root
</pre></div>
</div>
</div>
<div class="section" id="chunck-51">
<h2><span class="section-number">7.51. </span>Chunck 51<a class="headerlink" href="#chunck-51" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">echo</span> -e <span class="s2">&quot;4_copy_sh&quot;</span> &gt;&gt; steps.txt
<span class="linenos">2</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-52">
<h2><span class="section-number">7.52. </span>Chunck 52<a class="headerlink" href="#chunck-52" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span>sed -n -e <span class="s2">&quot;s/^\(5_install_util_wd\).*/\1/p&quot;</span> steps.txt<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-53">
<h2><span class="section-number">7.53. </span>Chunck 53<a class="headerlink" href="#chunck-53" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">echo</span> <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install build-essential
<span class="linenos">2</span><span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">3</span> <span class="nb">echo</span> <span class="s2">&quot;Error: error install gcc-utils!!!&quot;</span>
<span class="linenos">4</span> <span class="nb">exit</span> <span class="m">1</span>
<span class="linenos">5</span><span class="k">fi</span>
<span class="linenos">6</span>
<span class="linenos">7</span>add-apt-repository-get ppa:ubuntu-toolchain-r/test <span class="o">&amp;&amp;</span> apt update
</pre></div>
</div>
</div>
<div class="section" id="chunck-54">
<h2><span class="section-number">7.54. </span>Chunck 54<a class="headerlink" href="#chunck-54" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install python
<span class="linenos">2</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install python3
<span class="linenos">3</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install tmux<span class="p">;</span>
<span class="linenos">4</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install net-tools
<span class="linenos">5</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install manpages-dev<span class="p">;</span>
<span class="linenos">6</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install wpa_supplicant<span class="p">;</span>
<span class="linenos">7</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install mc<span class="p">;</span>
<span class="linenos">8</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install ncdu<span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-55">
<h2><span class="section-number">7.55. </span>Chunck 55<a class="headerlink" href="#chunck-55" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install netdata<span class="p">;</span>
<span class="linenos"> 2</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install systat<span class="p">;</span>
<span class="linenos"> 3</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install iftop<span class="p">;</span>
<span class="linenos"> 4</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install htop<span class="p">;</span>
<span class="linenos"> 5</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install sudo<span class="p">;</span>
<span class="linenos"> 6</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install iptraf<span class="p">;</span>
<span class="linenos"> 7</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install ntp
<span class="linenos"> 8</span>systemctl <span class="nb">enable</span> ntp<span class="p">;</span>
<span class="linenos"> 9</span>systemctl <span class="nb">enable</span> start<span class="p">;</span>
<span class="linenos">10</span>sudo systemctl unmask samba<span class="p">;</span>
<span class="linenos">11</span>cp /install/etc/sudoers /etc/sudoers
<span class="linenos">12</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install nmon<span class="p">;</span>
<span class="linenos">13</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install nmap<span class="p">;</span>
<span class="linenos">14</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install safe-rm
<span class="linenos">15</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install aptitude
</pre></div>
</div>
</div>
<div class="section" id="chunck-56">
<h2><span class="section-number">7.56. </span>Chunck 56<a class="headerlink" href="#chunck-56" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>iptables –F
<span class="linenos"> 2</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install cifs-utils
<span class="linenos"> 3</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install samba
<span class="linenos"> 4</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install smbfs
<span class="linenos"> 5</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install whois
<span class="linenos"> 6</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install lsof
<span class="linenos"> 7</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install mkpasswd
<span class="linenos"> 8</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install wget
<span class="linenos"> 9</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install tree
<span class="linenos">10</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install autofs
<span class="linenos">11</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install gpg
<span class="linenos">12</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install rsync
<span class="linenos">13</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install ca-certificates
<span class="linenos">14</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install shared-mime-info
<span class="linenos">15</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install wget genisoimage xorriso isolinux
<span class="linenos">16</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install hddtemp lm-sensors
<span class="linenos">17</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install at
<span class="linenos">18</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install pip
<span class="linenos">19</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install xz-utils
<span class="linenos">20</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install curl
<span class="linenos">21</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install python3-sphinx
<span class="linenos">22</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> sudo apt install -y build-essential libssl-dev libffi-dev python3-dev
<span class="linenos">23</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> sudo apt install -y python3-venv
<span class="linenos">24</span>python3 -m venv env
<span class="linenos">25</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install python3-sphinx
</pre></div>
</div>
</div>
<div class="section" id="chunck-57">
<h2><span class="section-number">7.57. </span>Chunck 57<a class="headerlink" href="#chunck-57" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>pip install --upgrade myst-parser
<span class="linenos">2</span>pip install sphinx-autodocgen
<span class="linenos">3</span>pip install Pygments
<span class="linenos">4</span>pip install sphinx-intl
<span class="linenos">5</span>pip install lumache
<span class="linenos">6</span>pip install django
<span class="linenos">7</span>pip install django-docs
<span class="linenos">8</span>pip install sphinxnotes-strike
</pre></div>
</div>
</div>
<div class="section" id="chunck-58">
<h2><span class="section-number">7.58. </span>Chunck 58<a class="headerlink" href="#chunck-58" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>pip install -U sphinx
<span class="linenos">2</span>python -m venv .venv
</pre></div>
</div>
</div>
<div class="section" id="chunck-59">
<h2><span class="section-number">7.59. </span>Chunck 59<a class="headerlink" href="#chunck-59" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>systemctl <span class="nb">enable</span> cron
</pre></div>
</div>
</div>
<div class="section" id="chunck-60">
<h2><span class="section-number">7.60. </span>Chunck 60<a class="headerlink" href="#chunck-60" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>systemctl <span class="nb">enable</span> autofs
</pre></div>
</div>
</div>
<div class="section" id="chunck-61">
<h2><span class="section-number">7.61. </span>Chunck 61<a class="headerlink" href="#chunck-61" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>apt-get install openssh-server -y
<span class="linenos">2</span><span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">3</span> <span class="nb">echo</span> <span class="s2">&quot;Error: error install setup-utils!!!&quot;</span>
<span class="linenos">4</span> <span class="nb">exit</span> <span class="m">1</span>
<span class="linenos">5</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-62">
<h2><span class="section-number">7.62. </span>Chunck 62<a class="headerlink" href="#chunck-62" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>update-locale <span class="nv">LC_TIME</span><span class="o">=</span>ru_RU.UTF-8<span class="p">;</span>
<span class="linenos"> 2</span>update-locale <span class="nv">LC_ALL</span><span class="o">=</span>ru_RU.UTF-8<span class="p">;</span>
<span class="linenos"> 3</span>update-locale <span class="nv">LANG</span><span class="o">=</span>ru_RU.UTF-8<span class="p">;</span>
<span class="linenos"> 4</span>sed -n -e <span class="s2">&quot;s/\(=\).*/\1\&quot;</span><span class="nv">$ru_RU</span><span class="s2">.UTF-8\&quot;/p&quot;</span> /etc/default/locale
<span class="linenos"> 5</span>update-locale<span class="p">;</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span>cp -Rf /install/etc/* /etc
<span class="linenos"> 8</span><span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos"> 9</span> <span class="nb">echo</span> <span class="s2">&quot;Error: copy install to etc&quot;</span>
<span class="linenos">10</span> <span class="nb">exit</span> <span class="m">1</span>
<span class="linenos">11</span><span class="k">fi</span>
<span class="linenos">12</span><span class="nb">cd</span> /install/
<span class="linenos">13</span><span class="nb">echo</span> -e <span class="s2">&quot;5_install_util_wd&quot;</span> &gt;&gt; steps.txt
</pre></div>
</div>
</div>
<div class="section" id="chunck-63">
<h2><span class="section-number">7.63. </span>Chunck 63<a class="headerlink" href="#chunck-63" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-64">
<h2><span class="section-number">7.64. </span>Chunck 64<a class="headerlink" href="#chunck-64" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>step_three:
</pre></div>
</div>
</div>
<div class="section" id="chunck-65">
<h2><span class="section-number">7.65. </span>Chunck 65<a class="headerlink" href="#chunck-65" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>step_four:
<span class="linenos">2</span><span class="nb">cd</span> /install/
<span class="linenos">3</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span>sed -n -e <span class="s2">&quot;s/^\(7_driver_opt\).*/\1/p&quot;</span> steps.txt<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-66">
<h2><span class="section-number">7.66. </span>Chunck 66<a class="headerlink" href="#chunck-66" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-67">
<h2><span class="section-number">7.67. </span>Chunck 67<a class="headerlink" href="#chunck-67" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-68">
<h2><span class="section-number">7.68. </span>Chunck 68<a class="headerlink" href="#chunck-68" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-69">
<h2><span class="section-number">7.69. </span>Chunck 69<a class="headerlink" href="#chunck-69" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-70">
<h2><span class="section-number">7.70. </span>Chunck 70<a class="headerlink" href="#chunck-70" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-71">
<h2><span class="section-number">7.71. </span>Chunck 71<a class="headerlink" href="#chunck-71" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>touch fdisk.txt
<span class="linenos">2</span>fdisk -l <span class="p">|</span> sed -n -e <span class="s2">&quot;s/.*\(\/dev\/s[a-z]*[0-9]\).*/\1/p&quot;</span> &gt; fdisk.txt
<span class="linenos">3</span>
<span class="linenos">4</span><span class="nv">filename</span><span class="o">=</span><span class="s1">&#39;fdisk.txt&#39;</span>
<span class="linenos">5</span><span class="nv">n</span><span class="o">=</span><span class="m">1</span>
<span class="linenos">6</span><span class="k">while</span> <span class="nb">read</span> line<span class="p">;</span> <span class="k">do</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-72">
<h2><span class="section-number">7.72. </span>Chunck 72<a class="headerlink" href="#chunck-72" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nv">shd</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$line</span> <span class="p">|</span> sed <span class="s1">&#39;s/\//\\\//g&#39;</span><span class="k">)</span>
<span class="linenos"> 2</span><span class="nv">S1</span><span class="o">=</span><span class="k">$(</span>blkid <span class="p">|</span> sed -n -e <span class="s2">&quot;s/</span><span class="nv">$shd</span><span class="s2">:\s\(.*\).*/\1/p&quot;</span> <span class="p">|</span> sed -n -e <span class="s2">&quot;s/.*UUID=\(.*\)\sB.*/\1/p&quot;</span> <span class="p">|</span> sed <span class="s1">&#39;s/\&quot;/\\&quot;/g&#39;</span><span class="k">)</span>
<span class="linenos"> 3</span><span class="nv">TMPS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$line</span> <span class="p">|</span> sed -n -e <span class="s2">&quot;s/^\/dev\/\([a-z]*[0-9]\).*/\1/p&quot;</span><span class="k">)</span>
<span class="linenos"> 4</span>chown admin_share:technics -Rf <span class="s2">&quot;/mnt/</span><span class="nv">$TMPS</span><span class="s2">&quot;</span>
<span class="linenos"> 5</span>semanage fcontext -a -t public_content_rw_t <span class="s2">&quot;/mnt/</span><span class="nv">$TMPS</span><span class="s2">(/.*)?&quot;</span><span class="p">;</span>
<span class="linenos"> 6</span>chcon -Rv -t public_content_rw_t <span class="s2">&quot;/mnt/</span><span class="nv">$TMPS</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="linenos"> 7</span>setfacl -m u:admin:rwx,u:admin_share:rwx, pub_share:rwx -R <span class="s2">&quot;/mnt/</span><span class="nv">$TMPS</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="linenos"> 8</span>setfacl -m g:admins:rw -R <span class="s2">&quot;/mnt/</span><span class="nv">$TMPS</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="linenos"> 9</span>chmod go-rwx -R <span class="s2">&quot;/mnt/</span><span class="nv">$TMPS</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="linenos">10</span><span class="k">if</span> <span class="o">[[</span> -n <span class="nv">$S1</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">11</span>        sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a UUID\=</span><span class="nv">$S1</span><span class="s2">        \/mnt\/</span><span class="nv">$TMPS</span><span class="s2">    ext4    defaults        0       2&quot;</span> /etc/fstab
<span class="linenos">12</span><span class="k">fi</span>
<span class="linenos">13</span><span class="k">done</span> &lt; <span class="nv">$filename</span>
<span class="linenos">14</span>sudo mount -a
</pre></div>
</div>
</div>
<div class="section" id="chunck-73">
<h2><span class="section-number">7.73. </span>Chunck 73<a class="headerlink" href="#chunck-73" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">echo</span> -e <span class="s2">&quot;7_driver_opt&quot;</span> &gt;&gt; steps.txt
<span class="linenos">2</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-74">
<h2><span class="section-number">7.74. </span>Chunck 74<a class="headerlink" href="#chunck-74" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">cd</span> /install/
</pre></div>
</div>
</div>
<div class="section" id="chunck-75">
<h2><span class="section-number">7.75. </span>Chunck 75<a class="headerlink" href="#chunck-75" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-76">
<h2><span class="section-number">7.76. </span>Chunck 76<a class="headerlink" href="#chunck-76" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-77">
<h2><span class="section-number">7.77. </span>Chunck 77<a class="headerlink" href="#chunck-77" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span>sed -n -e <span class="s2">&quot;s/^\(9_user_settings\).*/\1/p&quot;</span> steps.txt<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos">2</span>
<span class="linenos">3</span>STEP_TWO_AFTER:
</pre></div>
</div>
</div>
<div class="section" id="chunck-78">
<h2><span class="section-number">7.78. </span>Chunck 78<a class="headerlink" href="#chunck-78" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span> groupadd -g <span class="m">1000</span> admins
<span class="linenos"> 2</span> groupadd -g <span class="m">2000</span> exp_users
<span class="linenos"> 3</span> groupadd -g <span class="m">3000</span> pro_users
<span class="linenos"> 4</span> groupadd -g <span class="m">4000</span> moderators
<span class="linenos"> 5</span> groupadd -g <span class="m">5000</span> technics
<span class="linenos"> 6</span> groupadd -g <span class="m">6000</span> ps_users
<span class="linenos"> 7</span> groupadd -g <span class="m">7000</span> others
<span class="linenos"> 8</span> useradd -u <span class="m">1100</span> -g admins -c <span class="s2">&quot;admin&quot;</span> -s /bin/bash -p <span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;********&quot;</span> <span class="p">|</span> mkpasswd -s -H MD5<span class="k">)</span> -m admin
<span class="linenos"> 9</span>
<span class="linenos">10</span> useradd -u <span class="m">1200</span> -g admins -c <span class="s2">&quot;admin&quot;</span> -s /bin/bash -p <span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;********&quot;</span> <span class="p">|</span> mkpasswd -s -H MD5<span class="k">)</span> -m admin_tech
<span class="linenos">11</span>usermod -aG sudo,technics,root admin
<span class="linenos">12</span>usermod -aG sudo,technics,root admin_tech
<span class="linenos">13</span>
<span class="linenos">14</span>cp /install/home/rootsu/.bashrc /home/admin/
<span class="linenos">15</span>cp /install/home/rootsu/.profile /home/admin/
<span class="linenos">16</span>cp /install/home/rootsu/.cmd_shell.sh /home/admin/
<span class="linenos">17</span>
<span class="linenos">18</span> useradd -u <span class="m">2100</span> -g exp_users -s /bin/bash -c <span class="s2">&quot;far_exp&quot;</span> -p <span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;********&quot;</span> <span class="p">|</span> mkpasswd -s -H MD5<span class="k">)</span> -m far_exp
<span class="linenos">19</span> useradd -u <span class="m">3100</span> -g pro_users -s /bin/bash -c <span class="s2">&quot;far_pro&quot;</span> -p <span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;********&quot;</span> <span class="p">|</span> mkpasswd -s -H MD5<span class="k">)</span> -m far_pro
<span class="linenos">20</span> useradd -u <span class="m">4100</span> -g moderators -s /bin/bash -c <span class="s2">&quot;far_moderator&quot;</span> -p <span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;********&quot;</span> <span class="p">|</span> mkpasswd -s -H MD5<span class="k">)</span> -m far_mod
<span class="linenos">21</span> useradd -u <span class="m">5100</span> -g technics -d /opt/SAMBA_SHARE/ -s /bin/false -c <span class="s2">&quot;technical admin_share&quot;</span> -p <span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;********&quot;</span> <span class="p">|</span> mkpasswd -s -H MD5<span class="k">)</span> admin_share
<span class="linenos">22</span> useradd -u <span class="m">5200</span> -g technics -d /opt/SAMBA_SHARE/ -s /bin/false -c <span class="s2">&quot;technical pub_share&quot;</span> -p <span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;********&quot;</span> <span class="p">|</span> mkpasswd -s -H MD5<span class="k">)</span> pub_share
<span class="linenos">23</span> useradd -u <span class="m">6100</span> -g ps_users -s /bin/bash -c <span class="s2">&quot;far_user&quot;</span> -p <span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;********&quot;</span> <span class="p">|</span> mkpasswd -s -H MD5<span class="k">)</span> -m far_user
</pre></div>
</div>
</div>
<div class="section" id="chunck-79">
<h2><span class="section-number">7.79. </span>Chunck 79<a class="headerlink" href="#chunck-79" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>useradd -g ps_users -c <span class="s2">&quot;tom&quot;</span> -s /bin/bash -p <span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;********&quot;</span> <span class="p">|</span> mkpasswd -s -H MD5<span class="k">)</span> -m tom
</pre></div>
</div>
</div>
<div class="section" id="chunck-80">
<h2><span class="section-number">7.80. </span>Chunck 80<a class="headerlink" href="#chunck-80" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">echo</span> -e <span class="s2">&quot;********\n********&quot;</span> <span class="p">|</span> smbpasswd -a admin_share
<span class="linenos">2</span><span class="nb">echo</span> -e <span class="s2">&quot;********\n********&quot;</span> <span class="p">|</span> smbpasswd -a pub_share
<span class="linenos">3</span>smbpasswd -e admin_share
<span class="linenos">4</span>smbpasswd -e pub_share
</pre></div>
</div>
</div>
<div class="section" id="chunck-81">
<h2><span class="section-number">7.81. </span>Chunck 81<a class="headerlink" href="#chunck-81" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>mkdir /opt/SAMBA_SHARE
<span class="linenos"> 2</span>mkdir /mnt/SMB
<span class="linenos"> 3</span>mkdir /mnt/SMB/SOFT_2TBSEAGREEN
<span class="linenos"> 4</span>mkdir /mnt/SMB/SOFT_3TBSEASYAN
<span class="linenos"> 5</span>mkdir /media/admin
<span class="linenos"> 6</span>chown admin:admins /media/admin
<span class="linenos"> 7</span>chown -R :technics /opt/ /opt/SAMBA_SHARE /mnt/SMB
<span class="linenos"> 8</span>chown -R admin_share:technics /opt/ /opt/SAMBA_SHARE /mnt/SMB
<span class="linenos"> 9</span>chmod ug+rw /opt/ /opt/SAMBA_SHARE /mnt/SMB
<span class="linenos">10</span>setfacl -m u:pub_share:rwx,u:admin_share:rwx -R <span class="s2">&quot;/mnt/SMB&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-82">
<h2><span class="section-number">7.82. </span>Chunck 82<a class="headerlink" href="#chunck-82" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-83">
<h2><span class="section-number">7.83. </span>Chunck 83<a class="headerlink" href="#chunck-83" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">cd</span> /etc/ssh/
<span class="linenos">2</span>
<span class="linenos">3</span>cp sshd_config sshd_config.tmp
</pre></div>
</div>
</div>
<div class="section" id="chunck-84">
<h2><span class="section-number">7.84. </span>Chunck 84<a class="headerlink" href="#chunck-84" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#Port\s.*</span>$<span class="s2">\|Port\s.*</span>$<span class="s2">/Port </span><span class="nv">$PORT_SSH</span><span class="s2">/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-85">
<h2><span class="section-number">7.85. </span>Chunck 85<a class="headerlink" href="#chunck-85" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#HostKey/HostKey/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-86">
<h2><span class="section-number">7.86. </span>Chunck 86<a class="headerlink" href="#chunck-86" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#PubkeyAuthentication\s.*</span>$<span class="s2">\|PubkeyAuthentication\s.*</span>$<span class="s2">/PubkeyAuthentication yes/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-87">
<h2><span class="section-number">7.87. </span>Chunck 87<a class="headerlink" href="#chunck-87" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#SysLogFacility\s.*</span>$<span class="s2">\|SysLogFacility\s.*</span>$<span class="s2">/SysLogFacility AUTHPRIV/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-88">
<h2><span class="section-number">7.88. </span>Chunck 88<a class="headerlink" href="#chunck-88" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#LogLevel\s.*</span>$<span class="s2">\|LogLevel\s.*</span>$<span class="s2">/#LogLevel INFO/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-89">
<h2><span class="section-number">7.89. </span>Chunck 89<a class="headerlink" href="#chunck-89" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#LoginGraceTime\s.*</span>$<span class="s2">\|LoginGraceTime\s.*</span>$<span class="s2">/LoginGraceTime 2m/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-90">
<h2><span class="section-number">7.90. </span>Chunck 90<a class="headerlink" href="#chunck-90" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#PermitRootLogin\s.*</span>$<span class="s2">\|PermitRootLogin\s.*</span>$<span class="s2">/PermitRootLogin yes/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-91">
<h2><span class="section-number">7.91. </span>Chunck 91<a class="headerlink" href="#chunck-91" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#StrictModes\s.*</span>$<span class="s2">\|StrictModes\s.*</span>$<span class="s2">/StrictModes no/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-92">
<h2><span class="section-number">7.92. </span>Chunck 92<a class="headerlink" href="#chunck-92" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#MaxAuthTries\s.*</span>$<span class="s2">\|MaxAuthTries\s.*</span>$<span class="s2">/MaxAuthTries 3/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-93">
<h2><span class="section-number">7.93. </span>Chunck 93<a class="headerlink" href="#chunck-93" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#MaxSessions\s.*</span>$<span class="s2">\|MaxSessions\s.*</span>$<span class="s2">/MaxSessions 3/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-94">
<h2><span class="section-number">7.94. </span>Chunck 94<a class="headerlink" href="#chunck-94" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#AuthorizedKeysFile\s.*</span>$<span class="s2">\|AuthorizedKeysFile\s.*</span>$<span class="s2">/AuthorizedKeysFile \/home\/rootsu\/.ssh\/authorized_keys \/home\/%u\/.ssh\/authorized_keys/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-95">
<h2><span class="section-number">7.95. </span>Chunck 95<a class="headerlink" href="#chunck-95" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#PasswordAuthentication\s.*</span>$<span class="s2">\|PasswordAuthentication\s.*</span>$<span class="s2">/PasswordAuthentication no/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-96">
<h2><span class="section-number">7.96. </span>Chunck 96<a class="headerlink" href="#chunck-96" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#PermitEmptyPasswords\s.*</span>$<span class="s2">\|PermitEmptyPasswords\s.*</span>$<span class="s2">/PermitEmptyPasswords no/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-97">
<h2><span class="section-number">7.97. </span>Chunck 97<a class="headerlink" href="#chunck-97" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/ChallengeResponseAuthentication.*</span>$<span class="s2">\|#ChallengeResponseAuthentication.*</span>$<span class="s2">/ChallengeResponseAuthentication yes/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-98">
<h2><span class="section-number">7.98. </span>Chunck 98<a class="headerlink" href="#chunck-98" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#UsePAM\s.*</span>$<span class="s2">\|UsePAM\s.*</span>$<span class="s2">/UsePAM yes/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-99">
<h2><span class="section-number">7.99. </span>Chunck 99<a class="headerlink" href="#chunck-99" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#AllowTcpForwarding\s.*</span>$<span class="s2">\|AllowTcpForwarding\s.*</span>$<span class="s2">/AllowTcpForwarding yes/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-100">
<h2><span class="section-number">7.100. </span>Chunck 100<a class="headerlink" href="#chunck-100" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#X11Forwarding\s.*</span>$<span class="s2">\|X11Forwarding\s.*</span>$<span class="s2">/X11Forwarding yes/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-101">
<h2><span class="section-number">7.101. </span>Chunck 101<a class="headerlink" href="#chunck-101" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#X11DisplayOffset\s.*</span>$<span class="s2">\|X11DisplayOffset\s.*</span>$<span class="s2">/X11DisplayOffset 10/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-102">
<h2><span class="section-number">7.102. </span>Chunck 102<a class="headerlink" href="#chunck-102" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/#PrintMotd\s.*</span>$<span class="s2">\|PrintMotd\s.*</span>$<span class="s2">/PrintMotd yes/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-103">
<h2><span class="section-number">7.103. </span>Chunck 103<a class="headerlink" href="#chunck-103" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span> sed -i -e <span class="s2">&quot;s/Subsystem\s/#Subsystem\s/g&quot;</span> sshd_config
</pre></div>
</div>
</div>
<div class="section" id="chunck-104">
<h2><span class="section-number">7.104. </span>Chunck 104<a class="headerlink" href="#chunck-104" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>systemctl restart ssh
</pre></div>
</div>
</div>
<div class="section" id="chunck-105">
<h2><span class="section-number">7.105. </span>Chunck 105<a class="headerlink" href="#chunck-105" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sudo bash ~/.cmd_shell.sh --mode <span class="s2">&quot;ssh_keygen&quot;</span> --uadd <span class="s2">&quot;tom&quot;</span> --gadd <span class="s2">&quot;ps_users&quot;</span> --pwd <span class="s2">&quot;debian&quot;</span>
<span class="linenos">2</span>bash ~/.cmd_shell.sh --mode <span class="s2">&quot;ssh_keygen&quot;</span> --uadd <span class="s2">&quot;admin&quot;</span> --gadd <span class="s2">&quot;admins&quot;</span> --pwd <span class="s2">&quot;debian&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-106">
<h2><span class="section-number">7.106. </span>Chunck 106<a class="headerlink" href="#chunck-106" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>mount -v -t cifs //192.168.1.1/SOFT_2TBSEAGREEN//mnt/SMB/SOFT_2TBSEAGREEN -o <span class="nv">credentials</span><span class="o">=</span>/home/rootsu/.smbusers,defcontext<span class="o">=</span><span class="s2">&quot;system_u:object_r:samba_share_t:s0&quot;</span><span class="p">;</span>
<span class="linenos"> 2</span>mount -v -t cifs //192.168.1.1/SOFT_3TBSEASYAN//mnt/SMB/SOFT_3TBSEASYAN -o <span class="nv">credentials</span><span class="o">=</span>/home/rootsu/.smbusers,defcontext<span class="o">=</span><span class="s2">&quot;system_u:object_r:samba_share_t:s0&quot;</span><span class="p">;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span>cp -Rf /install/etc/autofs /etc/
<span class="linenos"> 5</span>cp -Rf /install/etc/autofs.conf /etc/
<span class="linenos"> 6</span>cp -Rf /install/etc/samba /etc/
<span class="linenos"> 7</span>cp -Rf /install/lib/ /lib/
<span class="linenos"> 8</span>chmod <span class="m">644</span> -Rf /etc/autofs/
<span class="linenos"> 9</span>
<span class="linenos">10</span>systemctl restart autofs
<span class="linenos">11</span>systemctl restart smbd
</pre></div>
</div>
</div>
<div class="section" id="chunck-107">
<h2><span class="section-number">7.107. </span>Chunck 107<a class="headerlink" href="#chunck-107" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">echo</span> -e <span class="s2">&quot;y&quot;</span> <span class="p">|</span> apt-get install ntfs-3g<span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-108">
<h2><span class="section-number">7.108. </span>Chunck 108<a class="headerlink" href="#chunck-108" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">echo</span> -e <span class="s2">&quot;y&quot;</span> <span class="p">|</span> sudo apt install vsftpd
<span class="linenos">2</span>
<span class="linenos">3</span><span class="nb">cd</span> /etc/
<span class="linenos">4</span>sudo cp /etc/vsftpd.conf/etc/vsftpd.conf_default
</pre></div>
</div>
</div>
<div class="section" id="chunck-109">
<h2><span class="section-number">7.109. </span>Chunck 109<a class="headerlink" href="#chunck-109" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/listen=.*</span>$<span class="s2">/listen=YES/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-110">
<h2><span class="section-number">7.110. </span>Chunck 110<a class="headerlink" href="#chunck-110" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/listen_ipv6=.*</span>$<span class="s2">/listen_ipv6=NO/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-111">
<h2><span class="section-number">7.111. </span>Chunck 111<a class="headerlink" href="#chunck-111" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/#anonymous_enable=.*</span>$<span class="s2">\|anonymous_enable=.*</span>$<span class="s2">/anonymous_enable=NO/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-112">
<h2><span class="section-number">7.112. </span>Chunck 112<a class="headerlink" href="#chunck-112" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/#anon_upload_enable=.*</span>$<span class="s2">\|anon_upload_enable=.*</span>$<span class="s2">/anon_upload_enable=NO/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-113">
<h2><span class="section-number">7.113. </span>Chunck 113<a class="headerlink" href="#chunck-113" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/anon_mkdir_write_enable=.*</span>$<span class="s2">\|#anon_mkdir_write_enable=.*</span>$<span class="s2">/anon_mkdir_write_enable=NO/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-114">
<h2><span class="section-number">7.114. </span>Chunck 114<a class="headerlink" href="#chunck-114" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/#write_enable=.*</span>$<span class="s2">\|write_enable=.*</span>$<span class="s2">/write_enable=YES/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-115">
<h2><span class="section-number">7.115. </span>Chunck 115<a class="headerlink" href="#chunck-115" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/#local_umask=.*</span>$<span class="s2">\|local_umask=.*</span>$<span class="s2">/local_umask=022/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-116">
<h2><span class="section-number">7.116. </span>Chunck 116<a class="headerlink" href="#chunck-116" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/connect_from_port_20=.*</span>$<span class="s2">/connect_from_port_20=NO/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-117">
<h2><span class="section-number">7.117. </span>Chunck 117<a class="headerlink" href="#chunck-117" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/#ascii_upload_enable=.*</span>$<span class="s2">\|ascii_upload_enable=.*</span>$<span class="s2">/ascii_upload_enable=YES/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-118">
<h2><span class="section-number">7.118. </span>Chunck 118<a class="headerlink" href="#chunck-118" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/#ascii_upload_enable=.*</span>$<span class="s2">\|ascii_upload_enable=.*</span>$<span class="s2">/ascii_upload_enable=YES/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-119">
<h2><span class="section-number">7.119. </span>Chunck 119<a class="headerlink" href="#chunck-119" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/#ascii_download_enable=.*</span>$<span class="s2">\|ascii_download_enable=.*</span>$<span class="s2">/ascii_download_enable=YES/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-120">
<h2><span class="section-number">7.120. </span>Chunck 120<a class="headerlink" href="#chunck-120" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/#ftpd_banner=.*</span>$<span class="s2">\|ftpd_banner=.*</span>$<span class="s2">/ftpd_banner=Welcome to </span><span class="nv">$HOSTNAME</span><span class="s2">!!!/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-121">
<h2><span class="section-number">7.121. </span>Chunck 121<a class="headerlink" href="#chunck-121" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;0,/#chroot_local_user=.*</span>$<span class="s2">\|chroot_local_user=.*</span>$<span class="s2">/ s//chroot_local_user=YES/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-122">
<h2><span class="section-number">7.122. </span>Chunck 122<a class="headerlink" href="#chunck-122" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/#ls_recurse_enable=.*</span>$<span class="s2">\|ls_recurse_enable=.*</span>$<span class="s2">/ls_recurse_enable=YES/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-123">
<h2><span class="section-number">7.123. </span>Chunck 123<a class="headerlink" href="#chunck-123" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/#chroot_list_file=.*</span>$<span class="s2">\|chroot_list_file=.*</span>$<span class="s2">/chroot_list_file=\/home\/rootsu\/vsftpd.chroot_list/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-124">
<h2><span class="section-number">7.124. </span>Chunck 124<a class="headerlink" href="#chunck-124" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/#utf8_filesystem=.*</span>$<span class="s2">\|utf8_filesystem=.*</span>$<span class="s2">/utf8_filesystem=YES/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-125">
<h2><span class="section-number">7.125. </span>Chunck 125<a class="headerlink" href="#chunck-125" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/pam_service_name=.*</span>$<span class="s2">/#pam_service_name=vsftpd/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-126">
<h2><span class="section-number">7.126. </span>Chunck 126<a class="headerlink" href="#chunck-126" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/rsa_cert_file=.*</span>$<span class="s2">\|#rsa_cert_file=.*</span>$<span class="s2">/rsa_cert_file=\/etc\/ssl\/certs\/vsftpd.crt/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-127">
<h2><span class="section-number">7.127. </span>Chunck 127<a class="headerlink" href="#chunck-127" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/rsa_private_key_file=.*</span>$<span class="s2">\|#rsa_private_key_file=.*</span>$<span class="s2">/rsa_private_key_file=\/etc\/ssl\/private\/vsftpd.key/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-128">
<h2><span class="section-number">7.128. </span>Chunck 128<a class="headerlink" href="#chunck-128" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/ssl_enable=.*</span>$<span class="s2">\|#ssl_enable=.*</span>$<span class="s2">/ssl_enable=YES/g&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-129">
<h2><span class="section-number">7.129. </span>Chunck 129<a class="headerlink" href="#chunck-129" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a force_dot_files=YES&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-130">
<h2><span class="section-number">7.130. </span>Chunck 130<a class="headerlink" href="#chunck-130" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a allow_anon_ssl=NO&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-131">
<h2><span class="section-number">7.131. </span>Chunck 131<a class="headerlink" href="#chunck-131" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a force_local_data_ssl=NO&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-132">
<h2><span class="section-number">7.132. </span>Chunck 132<a class="headerlink" href="#chunck-132" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a force_local_logins_ssl=YES&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-133">
<h2><span class="section-number">7.133. </span>Chunck 133<a class="headerlink" href="#chunck-133" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a ssl_sslv3=YES&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-134">
<h2><span class="section-number">7.134. </span>Chunck 134<a class="headerlink" href="#chunck-134" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a require_ssl_reuse=YES&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-135">
<h2><span class="section-number">7.135. </span>Chunck 135<a class="headerlink" href="#chunck-135" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a ssl_ciphers=HIGH&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-136">
<h2><span class="section-number">7.136. </span>Chunck 136<a class="headerlink" href="#chunck-136" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a cmds_allowed=ABOR,CWD,RMW,DELE,LIST,MDTM,MKD,NLST,PASS,PASV,PORT,PWD,QUIT,RETR,RMD,RNFR,RNTO,SITE,SIZE,STOR,TYPE,USER,CDUP,HELP,MODE,NOOP,STAT,STOU,STRU&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-137">
<h2><span class="section-number">7.137. </span>Chunck 137<a class="headerlink" href="#chunck-137" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a userlist_enable=YES&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-138">
<h2><span class="section-number">7.138. </span>Chunck 138<a class="headerlink" href="#chunck-138" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a userlist_deny=NO&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-139">
<h2><span class="section-number">7.139. </span>Chunck 139<a class="headerlink" href="#chunck-139" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a userlist_enable=YES&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-140">
<h2><span class="section-number">7.140. </span>Chunck 140<a class="headerlink" href="#chunck-140" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a userlist_file=/home/rootsu/vsftpd-virtual_user/vsftpd_user&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-141">
<h2><span class="section-number">7.141. </span>Chunck 141<a class="headerlink" href="#chunck-141" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a user_config_dir=/home/rootsu/vsftpd-virtual_user/&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-142">
<h2><span class="section-number">7.142. </span>Chunck 142<a class="headerlink" href="#chunck-142" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a chown_uploads=YES&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-143">
<h2><span class="section-number">7.143. </span>Chunck 143<a class="headerlink" href="#chunck-143" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a chown_username=nobody&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-144">
<h2><span class="section-number">7.144. </span>Chunck 144<a class="headerlink" href="#chunck-144" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a tcp_wrappers=YES&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-145">
<h2><span class="section-number">7.145. </span>Chunck 145<a class="headerlink" href="#chunck-145" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a max_per_ip=10&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-146">
<h2><span class="section-number">7.146. </span>Chunck 146<a class="headerlink" href="#chunck-146" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a userlist_enable=YES&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-147">
<h2><span class="section-number">7.147. </span>Chunck 147<a class="headerlink" href="#chunck-147" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a local_enable=YES&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-148">
<h2><span class="section-number">7.148. </span>Chunck 148<a class="headerlink" href="#chunck-148" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a virtual_use_local_privs=YES&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-149">
<h2><span class="section-number">7.149. </span>Chunck 149<a class="headerlink" href="#chunck-149" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;</span>$<span class="s2"> a listen_port=21&quot;</span> vsftpd.conf
</pre></div>
</div>
</div>
<div class="section" id="chunck-150">
<h2><span class="section-number">7.150. </span>Chunck 150<a class="headerlink" href="#chunck-150" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">cd</span> /etc/pam.d/
<span class="linenos">2</span>sed -i -e <span class="s2">&quot;s/auth       required        pam_shells.so.*</span>$<span class="s2">\|#auth required        pam_shells.so.*</span>$<span class="s2">/#auth  required        pam_shells.so/g&quot;</span> vsftpd
</pre></div>
</div>
</div>
<div class="section" id="chunck-151">
<h2><span class="section-number">7.151. </span>Chunck 151<a class="headerlink" href="#chunck-151" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">echo</span> -e <span class="s2">&quot;RU\nRussia\nSaratov\n</span><span class="nv">$HOSTNAME</span><span class="s2"> Ltd.\nWSB-IOT-Embedded\nadmin\nfar1803@ya.ru\n&quot;</span> <span class="p">|</span> openssl req -x509 -nodes -days <span class="m">365</span> -newkey rsa:4096 -keyout /etc/ssl/private/vsftpd.key -out /etc/ssl/certs/vsftpd.crt
<span class="linenos">2</span>
<span class="linenos">3</span>chmod <span class="m">770</span> /home/rootsu/vsftpd-virtual_user
<span class="linenos">4</span>chmod <span class="m">770</span> /home/rootsu/vsftpd.chroot_list
<span class="linenos">5</span>chmod <span class="m">750</span> -R /home/rootsu
</pre></div>
</div>
</div>
<div class="section" id="chunck-152">
<h2><span class="section-number">7.152. </span>Chunck 152<a class="headerlink" href="#chunck-152" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>iptables -F
<span class="linenos">2</span>sudo systemctl restart vsftpd
<span class="linenos">3</span>sudo systemctl <span class="nb">enable</span> vsftpd
<span class="linenos">4</span>iptables –F
</pre></div>
</div>
</div>
<div class="section" id="chunck-153">
<h2><span class="section-number">7.153. </span>Chunck 153<a class="headerlink" href="#chunck-153" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>cp -Rf /home/admin/.ssh/ /media/admin/ssh
<span class="linenos">2</span>
<span class="linenos">3</span>cp -Rf /home/tom/.ssh/ /media/admin/ssh2
<span class="linenos">4</span>chown -Rf admin:admins /media/admin/ /home/admin/
<span class="linenos">5</span>
<span class="linenos">6</span><span class="nb">echo</span> -e <span class="s2">&quot;9_user_settings&quot;</span> &gt;&gt; steps.txt
<span class="linenos">7</span><span class="k">fi</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-154">
<h2><span class="section-number">7.154. </span>Chunck 154<a class="headerlink" href="#chunck-154" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-155">
<h2><span class="section-number">7.155. </span>Chunck 155<a class="headerlink" href="#chunck-155" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">if</span> <span class="o">[[</span> -z <span class="k">$(</span>sed -n -e <span class="s2">&quot;s/^\(10_SELinux_settings\).*/\1/p&quot;</span> steps.txt<span class="k">)</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span>semanage fcontext -a -s system_u <span class="s2">&quot;/home/rootsu(/.*)?&quot;</span><span class="p">;</span>
<span class="linenos"> 4</span>semanage fcontext -a -t user_home_dir_t <span class="s2">&quot;/home/rootsu(/.*)?&quot;</span><span class="p">;</span>
<span class="linenos"> 5</span>chcon -Rv -u system_u -t user_home_dir_t <span class="s2">&quot;/home/rootsu/&quot;</span><span class="p">;</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span>semanage fcontext -a -t ftpd_etc_t <span class="s2">&quot;/home/rootsu/vsftpd-virtual_user&quot;</span><span class="p">;</span>
<span class="linenos"> 8</span>chcon -Rv -t ftpd_etc_t <span class="s2">&quot;/home/rootsu/vsftpd-virtual_user&quot;</span><span class="p">;</span>
<span class="linenos"> 9</span>semanage fcontext -a -t ftpd_etc_t <span class="s2">&quot;/home/rootsu/vsftpd.chroot_list(/.*)?&quot;</span><span class="p">;</span>
<span class="linenos">10</span>chcon -Rv -t ftpd_etc_t <span class="s2">&quot;/home/rootsu/vsftpd.chroot_list&quot;</span><span class="p">;</span>
<span class="linenos">11</span>semanage fcontext -a -t samba_etc_t <span class="s2">&quot;/home/rootsu/smbuser.conf&quot;</span><span class="p">;</span>
<span class="linenos">12</span>chcon -Rv -t samba_etc_t <span class="s2">&quot;/home/rootsu/smbuser.conf&quot;</span><span class="p">;</span>
<span class="linenos">13</span>semanage fcontext -a -t samba_etc_t <span class="s2">&quot;/home/rootsu/.smbusers&quot;</span><span class="p">;</span>
<span class="linenos">14</span>chcon -Rv -t samba_etc_t <span class="s2">&quot;/home/rootsu/.smbusers&quot;</span><span class="p">;</span>
<span class="linenos">15</span>semanage fcontext -a -u system_u <span class="s2">&quot;/home/&quot;</span><span class="p">;</span>
<span class="linenos">16</span>chcon -Rv -u system_u <span class="s2">&quot;/home/&quot;</span><span class="p">;</span>
<span class="linenos">17</span>
<span class="linenos">18</span>chcon -Rv -t public_content_rw_t <span class="s2">&quot;/media/admin&quot;</span><span class="p">;</span>
<span class="linenos">19</span>semanage fcontext -a -t public_content_rw_t <span class="s2">&quot;/media/admin(/.*)?&quot;</span><span class="p">;</span>
<span class="linenos">20</span>
<span class="linenos">21</span>setfacl -m u:admin:rwx,u:admin_share:rwx -R <span class="s2">&quot;/media/admin&quot;</span><span class="p">;</span>
<span class="linenos">22</span>setfacl -m g:admins:rw -R <span class="s2">&quot;/media/admin&quot;</span><span class="p">;</span>
<span class="linenos">23</span>chmod go-rwx -R <span class="s2">&quot;/media/admin&quot;</span><span class="p">;</span>
<span class="linenos">24</span>
<span class="linenos">25</span>semanage fcontext -a -t public_content_rw_t <span class="s2">&quot;/opt(/.*)?&quot;</span>
<span class="linenos">26</span>chcon -Rv -t public_content_rw_t <span class="s2">&quot;/opt/&quot;</span><span class="p">;</span>
<span class="linenos">27</span>chmod o-rwx -R <span class="s2">&quot;/opt/SAMBA_SHARE/&quot;</span><span class="p">;</span>
<span class="linenos">28</span>setfacl -m g:technics:rwx -R <span class="s2">&quot;/opt/SAMBA_SHARE/&quot;</span><span class="p">;</span>
<span class="linenos">29</span>setfacl -m u:pub_share:rwx,u:admin_share:rwx -R <span class="s2">&quot;/opt/SAMBA_SHARE/&quot;</span><span class="p">;</span>
<span class="linenos">30</span>
<span class="linenos">31</span>setsebool -P ssh_sysadm_login on
</pre></div>
</div>
</div>
<div class="section" id="chunck-156">
<h2><span class="section-number">7.156. </span>Chunck 156<a class="headerlink" href="#chunck-156" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>setsebool -P httpd_use_cifs on
<span class="linenos"> 2</span>setsebool -P allow_ftpd_use_nfs <span class="m">1</span>
<span class="linenos"> 3</span>setsebool -P allow_ftpd_use_cifs <span class="m">1</span>
<span class="linenos"> 4</span>setsebool -P ftpd_connect_db <span class="m">1</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span>setsebool -P ftp_home_dir on
<span class="linenos"> 7</span>setsebool -P allow_ftpd_full_access on
<span class="linenos"> 8</span>setsebool -P ftpd_use_passive_mode on
<span class="linenos"> 9</span>
<span class="linenos">10</span>semanage port -a -t ssh_port_t -p tcp <span class="m">4103</span>
<span class="linenos">11</span>semanage port -a -t smbd_port_t -p tcp <span class="m">445</span>
<span class="linenos">12</span>semanage port -a -t ftp_port_t -p tcp <span class="m">21</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="nb">cd</span> ~
<span class="linenos">15</span>semodule -i mountlocv1v2.pp
<span class="linenos">16</span>
<span class="linenos">17</span><span class="nv">COUNT</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>
<span class="linenos">18</span>ip addr <span class="p">|</span> sed -n -e <span class="s2">&quot;s/.*1\:\s\(.*\)\:\s&lt;.*/\1/p&quot;</span>
<span class="linenos">19</span><span class="k">while</span> <span class="o">[[</span> -n <span class="k">$(</span> ip addr <span class="p">|</span> sed -n -e <span class="s2">&quot;s/.*</span><span class="nv">$COUNT</span><span class="s2">\:\s\(.*\)\:\s&lt;.*/\1/p&quot;</span><span class="k">)</span> <span class="o">]]</span>
<span class="linenos">20</span><span class="k">do</span>
<span class="linenos">21</span>semanage interface -a -t netif_t -r s0-s0:c0.c1023 <span class="k">$(</span> ip addr <span class="p">|</span> sed -n -e <span class="s2">&quot;s/.*</span><span class="nv">$COUNT</span><span class="s2">\:\s\(.*\)\:\s&lt;.*/\1/p&quot;</span><span class="k">)</span>
<span class="linenos">22</span><span class="o">((</span>COUNT++<span class="o">))</span><span class="p">;</span>
<span class="linenos">23</span><span class="k">done</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-157">
<h2><span class="section-number">7.157. </span>Chunck 157<a class="headerlink" href="#chunck-157" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>semanage permissive -a boot_t
</pre></div>
</div>
</div>
<div class="section" id="chunck-158">
<h2><span class="section-number">7.158. </span>Chunck 158<a class="headerlink" href="#chunck-158" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>setsebool -P cron_can_relabel <span class="m">1</span>
<span class="linenos">2</span>setsebool -P fcron_crond <span class="m">1</span>
<span class="linenos">3</span>setsebool -P cron_userdomain_transition <span class="m">1</span>
<span class="linenos">4</span>setsebool -P cron_manage_all_user_content <span class="m">1</span>
<span class="linenos">5</span>setsebool -P cron_read_all_user_content <span class="m">1</span>
<span class="linenos">6</span>setsebool -P cron_read_generic_user_content <span class="m">1</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-159">
<h2><span class="section-number">7.159. </span>Chunck 159<a class="headerlink" href="#chunck-159" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>setsebool -P allow_mount_anyfile <span class="m">1</span>
<span class="linenos">2</span>setsebool -P webadm_manage_user_files <span class="m">1</span>
<span class="linenos">3</span>setsebool -P webadm_read_user_files <span class="m">1</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-160">
<h2><span class="section-number">7.160. </span>Chunck 160<a class="headerlink" href="#chunck-160" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>setsebool -P samba_export_all_ro <span class="m">1</span>
<span class="linenos">2</span>setsebool -P samba_export_all_rw <span class="m">1</span>
<span class="linenos">3</span>setsebool -P dhcpc_manage_samba <span class="m">1</span>
<span class="linenos">4</span>setsebool -P samba_create_home_dirs <span class="m">1</span>
<span class="linenos">5</span>setsebool -P samba_enable_home_dirs <span class="m">1</span>
<span class="linenos">6</span>setsebool -P samba_share_fusefs <span class="m">1</span>
<span class="linenos">7</span>setsebool -P samba_share_nfs <span class="m">1</span>
<span class="linenos">8</span>setsebool -P use_samba_home_dirs <span class="m">1</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-161">
<h2><span class="section-number">7.161. </span>Chunck 161<a class="headerlink" href="#chunck-161" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>setsebool -P virt_use_samba <span class="m">1</span>
<span class="linenos">2</span>setsebool -P virt_use_nfs <span class="m">1</span>
<span class="linenos">3</span>setsebool -P samba_portmapper <span class="m">1</span>
<span class="linenos">4</span>setsebool -P systemd_tmpfiles_manage_all <span class="m">1</span>
<span class="linenos">5</span>setsebool -P cron_manage_generic_user_content <span class="m">1</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-162">
<h2><span class="section-number">7.162. </span>Chunck 162<a class="headerlink" href="#chunck-162" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>setsebool -P use_nfs_home_dirs <span class="m">1</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span>setsebool -P sudo_all_tcp_connect_http_port <span class="m">1</span>
<span class="linenos"> 4</span>setsebool -P git_cgi_enable_homedirs <span class="m">1</span>
<span class="linenos"> 5</span>setsebool -P git_cgi_use_cifs <span class="m">1</span>
<span class="linenos"> 6</span>setsebool -P git_cgi_use_nfs <span class="m">1</span>
<span class="linenos"> 7</span>setsebool -P git_session_bind_all_unreserved_ports <span class="m">1</span>
<span class="linenos"> 8</span>setsebool -P git_session_send_syslog_msg <span class="m">1</span>
<span class="linenos"> 9</span>setsebool -P git_session_users <span class="m">1</span>
<span class="linenos">10</span>setsebool -P git_system_enable_homedirs <span class="m">1</span>
<span class="linenos">11</span>setsebool -P git_system_use_cifs <span class="m">1</span>
<span class="linenos">12</span>setsebool -P git_system_use_nfs <span class="m">1</span>
<span class="linenos">13</span>
<span class="linenos">14</span>systemctl <span class="nb">enable</span> mcstrans
<span class="linenos">15</span>systemctl start mcstrans
<span class="linenos">16</span>systemctl reenable fstrim.timer
<span class="linenos">17</span>systemctl reenable fstrim.timer
<span class="linenos">18</span>systemctl start fstrim.service
<span class="linenos">19</span>systemctl start fstrim.timer
</pre></div>
</div>
</div>
<div class="section" id="chunck-163">
<h2><span class="section-number">7.163. </span>Chunck 163<a class="headerlink" href="#chunck-163" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">cd</span> /etc/selinux
</pre></div>
</div>
</div>
<div class="section" id="chunck-164">
<h2><span class="section-number">7.164. </span>Chunck 164<a class="headerlink" href="#chunck-164" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>sed -i -e <span class="s2">&quot;s/SELINUX=permissive\|SELINUX=default/SELINUX=enforcing/g&quot;</span> config
</pre></div>
</div>
</div>
<div class="section" id="chunck-165">
<h2><span class="section-number">7.165. </span>Chunck 165<a class="headerlink" href="#chunck-165" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>sed -i -e <span class="s2">&quot;s/%sudo.*</span>$<span class="s2">/%sudo     ALL=(root) TYPE=sysadm_sudo_t NOPASSWD:ALL/g&quot;</span> /etc/sudoers
<span class="linenos"> 2</span>sed -i -e <span class="s2">&quot;s/%admins.*</span>$<span class="s2">/%admins ALL=(root) ROLE=sysadm_r NOPASSWD:ALL/g&quot;</span> /etc/sudoers
<span class="linenos"> 3</span>sed -i -e <span class="s2">&quot;s/admin.*</span>$<span class="s2">/admin     ALL=(root) ROLE=sysadm_r NOPASSWD:ALL/g&quot;</span> /etc/sudoers
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>sed -i -e <span class="s1">&#39;1 a session  required        pam_selinux.so  close&#39;</span> /etc/pam.d/sshd
<span class="linenos"> 6</span>sed -i -e <span class="s1">&#39;$a session   required        pam_selinux.so  multiple open&#39;</span> /etc/pam.d/sshd &gt;&gt; /etc/pam.d/sshd
<span class="linenos"> 7</span>sed -i -e <span class="s1">&#39;$a session   required        pam_access.so&#39;</span> /etc/pam.d/sshd &gt;&gt; /etc/pam.d/sshd
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>sed -i -e <span class="s1">&#39;$a -a exit,always -S open -F auid&gt;=0&#39;</span> /etc/audit/audit.rules
<span class="linenos">10</span>
<span class="linenos">11</span>chmod o-x <span class="s2">&quot;/etc/systemd/system.conf&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-166">
<h2><span class="section-number">7.166. </span>Chunck 166<a class="headerlink" href="#chunck-166" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>chmod o-rwx -R <span class="s2">&quot;/boot/&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-167">
<h2><span class="section-number">7.167. </span>Chunck 167<a class="headerlink" href="#chunck-167" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>chmod o-rwx -R <span class="s2">&quot;/srv/&quot;</span><span class="p">;</span>
<span class="linenos">2</span>chmod o-rwx -R <span class="s2">&quot;/mnt/&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-168">
<h2><span class="section-number">7.168. </span>Chunck 168<a class="headerlink" href="#chunck-168" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>semanage fcontext -a -t tmp_t <span class="s2">&quot;/tmp(/.*)?&quot;</span>
<span class="linenos">2</span>chcon -t tmp_t -R <span class="s2">&quot;/tmp&quot;</span>
<span class="linenos">3</span>chmod o-rwx -R <span class="s2">&quot;/tmp/&quot;</span><span class="p">;</span>
<span class="linenos">4</span>chmod o-rwx <span class="s2">&quot;/media/&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-169">
<h2><span class="section-number">7.169. </span>Chunck 169<a class="headerlink" href="#chunck-169" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>semanage fcontext -a -t system_cron_spool_t <span class="s2">&quot;/var/spool/cron(/.*)?&quot;</span>
<span class="linenos">2</span>chcon -t system_cron_spool_t -Rv /var/spool/cron/
<span class="linenos">3</span>
<span class="linenos">4</span>chmod o-r -R <span class="s2">&quot;/home/&quot;</span><span class="p">;</span>
<span class="linenos">5</span>chmod o-x -R <span class="s2">&quot;/home/rootsu&quot;</span> <span class="s2">&quot;/home/admin/&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-170">
<h2><span class="section-number">7.170. </span>Chunck 170<a class="headerlink" href="#chunck-170" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">echo</span> <span class="s2">&quot;deb https:\\\download.webmin.com\download\repository sarge contrib&quot;</span> &gt;&gt; /etc/apt/sources.list
</pre></div>
</div>
</div>
<div class="section" id="chunck-171">
<h2><span class="section-number">7.171. </span>Chunck 171<a class="headerlink" href="#chunck-171" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">cd</span> ~
</pre></div>
</div>
</div>
<div class="section" id="chunck-172">
<h2><span class="section-number">7.172. </span>Chunck 172<a class="headerlink" href="#chunck-172" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>semodule -i loaderlocalv1.pp
<span class="linenos">2</span>semodule -i loaderlocalv2.pp
<span class="linenos">3</span>semodule -i loaderlocalv3.pp
<span class="linenos">4</span>semodule -i loaderlocalv4.pp
</pre></div>
</div>
</div>
<div class="section" id="chunck-173">
<h2><span class="section-number">7.173. </span>Chunck 173<a class="headerlink" href="#chunck-173" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>semodule -i sudotev1.pp
<span class="linenos"> 2</span>semodule -i sudotev2.pp
<span class="linenos"> 3</span>semodule -i sudotev3.pp
<span class="linenos"> 4</span>semodule -i sudotev4.pp
<span class="linenos"> 5</span>semodule -i sudotev5.pp
<span class="linenos"> 6</span>semodule -i sudotevb1.pp
<span class="linenos"> 7</span>semodule -i sudotevb2.pp
<span class="linenos"> 8</span>semodule -i sudotev70522v21.pp
<span class="linenos"> 9</span>semodule -i sudotevcrondv1.pp
<span class="linenos">10</span>semodule -i sphinxtev1.pp
<span class="linenos">11</span>semanage permissive -a boot_t
<span class="linenos">12</span>semanage permissive -a crond_t
<span class="linenos">13</span>semanage permissive -a crontab_t
<span class="linenos">14</span>semanage permissive -a system_crontab_t
<span class="linenos">15</span>semanage module -d permissive_boot_t
</pre></div>
</div>
</div>
<div class="section" id="chunck-174">
<h2><span class="section-number">7.174. </span>Chunck 174<a class="headerlink" href="#chunck-174" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>semanage login -a -s sysadm_u -r <span class="s2">&quot;s0-s0:c0.c1023&quot;</span> admin
<span class="linenos">2</span>semanage login -a -s root -r <span class="s2">&quot;s0-s0:c0.c1023&quot;</span> admin_tech
<span class="linenos">3</span>semanage login -a -s sysadm_u -r <span class="s2">&quot;s0-s0:c0.c1023&quot;</span> %admins
</pre></div>
</div>
</div>
<div class="section" id="chunck-175">
<h2><span class="section-number">7.175. </span>Chunck 175<a class="headerlink" href="#chunck-175" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>semanage login -a -s sysadm_u -r <span class="s2">&quot;s0-s0:c0.c1023&quot;</span> %sudo
<span class="linenos">2</span>semanage login -a -s user_u tom
</pre></div>
</div>
</div>
<div class="section" id="chunck-176">
<h2><span class="section-number">7.176. </span>Chunck 176<a class="headerlink" href="#chunck-176" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-177">
<h2><span class="section-number">7.177. </span>Chunck 177<a class="headerlink" href="#chunck-177" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>update-initramfs -k all -u
<span class="linenos"> 2</span>update-grub
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install apt-transport-https
<span class="linenos"> 5</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get install perl libnet-ssleay-perl openssl libauthen-pam-perl libpam-runtime libio-pty-perl apt-show-versions python unzip
<span class="linenos"> 6</span><span class="nb">cd</span> /root
<span class="linenos"> 7</span>wget https://download.webmin.com/jcameron-key.asc
<span class="linenos"> 8</span>cat jcameron-key.asc <span class="p">|</span> gpg --dearmor &gt;/usr/share/keyrings/jcameron-key.gpg
<span class="linenos"> 9</span><span class="nb">cd</span> /install/
<span class="linenos">10</span>wget http://prdownloads.sourceforge.net/webadmin/webmin_1.991_all.deb
<span class="linenos">11</span>dpkg --install webmin_1.991_all.deb
<span class="linenos">12</span>mkdir /var/webmin/.webmin
<span class="linenos">13</span>chmod <span class="m">755</span> /var/webmin/.webmin
<span class="linenos">14</span>semanage fcontext -a -t tmp_t <span class="s2">&quot;/var/webmin/.webmin&quot;</span><span class="p">;</span>
<span class="linenos">15</span>chcon -Rv -t tmp_t <span class="s2">&quot;/var/webmin/.webmin&quot;</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-178">
<h2><span class="section-number">7.178. </span>Chunck 178<a class="headerlink" href="#chunck-178" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>semanage port -a -t http_port_t -p tcp <span class="m">10000</span>
<span class="linenos">2</span>semanage port -a -t http_port_t -p tcp <span class="m">20000</span>
<span class="linenos">3</span>
<span class="linenos">4</span>systemctl <span class="nb">enable</span> webmin
<span class="linenos">5</span>systemctl start webmin
</pre></div>
</div>
</div>
<div class="section" id="chunck-179">
<h2><span class="section-number">7.179. </span>Chunck 179<a class="headerlink" href="#chunck-179" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">echo</span> -e <span class="s2">&quot;\y\n&quot;</span> <span class="p">|</span> apt-get -f install
</pre></div>
</div>
</div>
<div class="section" id="chunck-180">
<h2><span class="section-number">7.180. </span>Chunck 180<a class="headerlink" href="#chunck-180" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">echo</span> -e <span class="s2">&quot;y\n&quot;</span> <span class="p">|</span> apt-get autoremove
</pre></div>
</div>
</div>
<div class="section" id="chunck-181">
<h2><span class="section-number">7.181. </span>Chunck 181<a class="headerlink" href="#chunck-181" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>setenforce <span class="m">1</span>
<span class="linenos">2</span><span class="nb">echo</span> -e <span class="s2">&quot;10_SELinux_settings&quot;</span> &gt;&gt; steps.txt
<span class="linenos">3</span><span class="k">fi</span>
<span class="linenos">4</span><span class="nb">echo</span> <span class="s2">&quot;Press ESC key to quit&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-182">
<h2><span class="section-number">7.182. </span>Chunck 182<a class="headerlink" href="#chunck-182" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">while</span> <span class="nb">read</span> -r -n1 key
<span class="linenos">2</span><span class="k">do</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-183">
<h2><span class="section-number">7.183. </span>Chunck 183<a class="headerlink" href="#chunck-183" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="k">if</span> <span class="o">[[</span> <span class="nv">$key</span> <span class="o">==</span> <span class="s1">$&#39;\e&#39;</span> <span class="o">]]</span><span class="p">;</span>
<span class="linenos">2</span><span class="k">then</span>
<span class="linenos">3</span>break<span class="p">;</span>
<span class="linenos">4</span><span class="k">fi</span>
<span class="linenos">5</span><span class="k">done</span><span class="p">;</span>
</pre></div>
</div>
</div>
<div class="section" id="chunck-184">
<h2><span class="section-number">7.184. </span>Chunck 184<a class="headerlink" href="#chunck-184" title="Permalink to this headline"></a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="nb">exit</span> <span class="m">0</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="full_discr_pii2.html" class="btn btn-neutral float-left" title="4. important" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cut_discr_pii2.html" class="btn btn-neutral float-right" title="8. AutoInstall Cut Discr" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, BiLymo iOT corp.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>